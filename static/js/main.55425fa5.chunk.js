(this.webpackJsonpflowchart=this.webpackJsonpflowchart||[]).push([[0],{409:function(e,t,n){},410:function(e,t,n){},623:function(e,t){},625:function(e,t){},640:function(e,t){},642:function(e,t){},670:function(e,t){},672:function(e,t){},673:function(e,t){},678:function(e,t){},680:function(e,t){},686:function(e,t){},688:function(e,t){},707:function(e,t){},719:function(e,t){},722:function(e,t){},740:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),c=n(31),i=n.n(c),r=(n(409),n(20)),l=(n(410),n(28)),s=n(22),d=n(784),j=n(123),b=n(788),u=n(798),g=n(799),p=n(794),h=n(814),O=n(807),x=n(800),m=n(374),f=n.n(m),v=n(99),y=n.n(v),S=n(375),k=n.n(S),C=n(117),w=n.n(C),T=n(368),I=n.n(T),N=(n(427),n(810)),A=n(789),F=n(797),P=n(791),J=n(790),R=n(376),E=n.n(R),B=n(118),L=n.n(B),H=n(796),D=n(742),z=n(801),Y=n(803),W=n(802),V=n(811),_=n(13),G=n.n(_),M=n(181),q=n(4),U=function(e){var t,n=e.currentFile,c=e.setCurrentFile,i=e.setCanvasVisibility,m=e.setEdgeType,v=e.setSelectedColor,S=Object(a.useState)(null===localStorage.getItem("files")?[]:JSON.parse(localStorage.getItem("files"))),C=Object(r.a)(S,2),T=C[0],R=C[1],B=Object(a.useState)(""),_=Object(r.a)(B,2),U=_[0],K=_[1],Q=Object(a.useState)(""),X=Object(r.a)(Q,2),Z=X[0],$=X[1],ee=o.a.useState(!1),te=Object(r.a)(ee,2),ne=te[0],ae=te[1],oe=Object(a.useState)(!1),ce=Object(r.a)(oe,2),ie=ce[0],re=ce[1],le=Object(a.useState)({value:!1,msg:""}),se=Object(r.a)(le,2),de=se[0],je=se[1],be=Object(a.useState)(null===localStorage.getItem("names")?[]:JSON.parse(localStorage.getItem("names"))),ue=Object(r.a)(be,2),ge=ue[0],pe=ue[1],he=Object(a.useState)({}),Oe=Object(r.a)(he,2),xe=Oe[0],me=Oe[1],fe=Object(a.useState)(""),ve=Object(r.a)(fe,2),ye=ve[0],Se=ve[1],ke=Object(a.useState)(null===localStorage.getItem("tags")?[]:JSON.parse(localStorage.getItem("tags"))),Ce=Object(r.a)(ke,2),we=Ce[0],Te=Ce[1],Ie=o.a.useState(!1),Ne=Object(r.a)(Ie,2),Ae=Ne[0],Fe=Ne[1],Pe=Object(a.useState)(!1),Je=Object(r.a)(Pe,2),Re=Je[0],Ee=Je[1],Be=Object(a.useState)(""),Le=Object(r.a)(Be,2),He=Le[0],De=Le[1],ze=Object(a.useState)(""),Ye=Object(r.a)(ze,2),We=Ye[0],Ve=Ye[1],_e=Object(a.useState)({}),Ge=Object(r.a)(_e,2),Me=Ge[0],qe=Ge[1],Ue=Object(a.useState)(!1),Ke=Object(r.a)(Ue,2),Qe=Ke[0],Xe=Ke[1],Ze=Object(a.useState)(!1),$e=Object(r.a)(Ze,2),et=$e[0],tt=$e[1],nt=Object(a.useState)({r:"193",g:"230",b:"255",a:"100"}),at=Object(r.a)(nt,2),ot=at[0],ct=at[1],it=function(){K(""),$(""),re(!1),Ee(!1),De(!1),Ve(!1),qe(!1),je({}),ne?ae(!1):Fe(!1)},rt=function(e){console.log("updating database...."),fetch("https://flowchart-backend.herokuapp.com/api/update-files",{method:"POST",body:JSON.stringify({session_id:localStorage.getItem("session"),files:e}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){console.log(e,"ndsojdmsio99999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999"),R(JSON.parse(e.files))}))},lt=function(e){console.log("updating database...."),fetch("https://flowchart-backend.herokuapp.com/api/update-names",{method:"POST",body:JSON.stringify({session_id:localStorage.getItem("session"),names:e}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return pe(e.names)}))},st=function(e){console.log("updating database...."),fetch("https://flowchart-backend.herokuapp.com/api/update-tags",{method:"POST",body:JSON.stringify({session_id:localStorage.getItem("session"),tags:e}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return Te(e.tags)}))};Object(a.useEffect)((function(){T.filter((function(e){return e.hasOwnProperty("parentId")||e.hasOwnProperty("elements")})).length&&!Qe?i(!0):i(!1)}),[T,i]);var dt=G()({default:{color:{width:"36px",height:"14px",borderRadius:"2px",background:"rgba(".concat(ot.r,", ").concat(ot.g,", ").concat(ot.b,", ").concat(ot.a,")")},swatch:{padding:"5px",borderRadius:"1px",boxShadow:"0 0 0 1px rgba(0,0,0,.1)",display:"inline-block",cursor:"pointer"},popover:{position:"absolute",zIndex:"2"},cover:{position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}}});return Object(q.jsxs)("div",{children:[Object(q.jsxs)(d.a,{item:!0,xs:12,style:{height:"70vh",textAlign:"center",backgroundColor:"#F2F2F2"},children:[Object(q.jsx)(j.a,{variant:"h5",gutterBottom:!0,style:{padding:10},children:"Folder Structures"}),Object(q.jsxs)(d.a,{container:!0,spacing:0,justifyContent:"center",children:[Object(q.jsx)(d.a,{item:!0,xs:4,children:Object(q.jsx)(b.a,{"aria-label":"Add Folder",onClick:function(){ae(!0)},color:"primary",children:Object(q.jsx)(f.a,{fontSize:"medium"})})}),Object(q.jsxs)(A.a,{open:ne,onClose:it,"aria-labelledby":"form-dialog-title",children:[Object(q.jsx)(J.a,{id:"form-dialog-title",children:"Create New Folder"}),Object(q.jsx)(P.a,{children:Object(q.jsx)(N.a,{error:!!de.value,autoFocus:!0,margin:"dense",id:"folder",label:"Folder Name",helperText:de.value&&de.msg,onChange:function(e){K(e.target.value)},fullWidth:!0})}),Object(q.jsxs)(F.a,{children:[Object(q.jsx)(u.a,{onClick:it,color:"primary",children:"Cancel"}),Object(q.jsx)(u.a,{onClick:function(){if(0===U.length)je({value:!0,msg:"Folder name can not be empty."});else if(ge.includes(U))je({value:!0,msg:"Folder must be unique."});else{var e=Object(s.a)(T);e.push({id:U,text:U,expanded:!0}),R(e),rt(e),localStorage.setItem("files",JSON.stringify(e));var t=Object(s.a)(ge);t.push(U),pe(t),lt(t),localStorage.setItem("names",JSON.stringify(t)),je({}),ae(!1)}},color:"primary",children:"Submit"})]})]}),Object(q.jsx)(d.a,{item:!0,xs:4,children:Object(q.jsx)(b.a,{"aria-label":"Add File",color:"primary",onClick:function(){Fe(!0)},disabled:!n.hasOwnProperty("expanded"),children:Object(q.jsx)(k.a,{fontSize:"medium"})})}),Object(q.jsxs)(A.a,{open:Ae,onClose:it,"aria-labelledby":"form-dialog-title",children:[Object(q.jsx)(J.a,{id:"form-dialog-title",children:"Create New File"}),Object(q.jsx)(P.a,{children:Object(q.jsx)(N.a,{error:!!de.value,autoFocus:!0,margin:"dense",id:"file",label:"File Name",onChange:function(e){$(e.target.value)},helperText:de.value&&de.msg,fullWidth:!0})}),Object(q.jsxs)(F.a,{children:[Object(q.jsx)(u.a,{onClick:it,color:"primary",children:"Cancel"}),Object(q.jsx)(u.a,{onClick:function(){if(0===Z.length)je({value:!0,msg:"File name can not be empty."});else if(ge.includes(Z))je({value:!0,msg:"File name must be unique."});else{var e=Object(s.a)(T);if(e[0].hasOwnProperty("parentId"))je({value:!0,msg:"You must have folder to create a file."});else{e.push({id:Z,text:Z,parentId:n.id,elements:[]}),R(e),rt(e),localStorage.setItem("files",JSON.stringify(e));var t=Object(s.a)(ge);t.push(Z),pe(t),localStorage.setItem("names",JSON.stringify(t)),lt(t),je({}),Fe(!1)}}},color:"primary",children:"Submit"})]})]}),Object(q.jsx)(d.a,{item:!0,xs:4,children:Object(q.jsx)(b.a,{"aria-label":"Delete",color:"secondary",onClick:function(){var e=JSON.parse(JSON.stringify(T)),t=T.findIndex((function(e){return e===n}));e.splice(t,1);var a=Object(s.a)(ge),o=ge.indexOf(n.id);a.splice(o,1),pe(a),lt(a),localStorage.setItem("names",JSON.stringify(a)),R(e),rt(e),localStorage.setItem("files",JSON.stringify(e)),localStorage.removeItem("current");var i=n.elements.filter((function(e){return n.id!==e.node}));c({}),function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log("updating database...."),fetch("https://flowchart-backend.herokuapp.com/api/update-elements",{method:"POST",body:JSON.stringify({session_id:localStorage.getItem("session"),file:n.id,isDelete:t,elements:e}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return console.log(e)}))}(i,!0)},disabled:0===Object.keys(n).length,children:Object(q.jsx)(y.a,{fontSize:"medium"})})})]}),Object(q.jsx)(g.a,{style:{marginTop:20},orientation:"horizontal"}),Object(q.jsx)(d.a,{item:!0,xs:12,style:{textAlign:"start",maxHeight:"100%",overflow:"auto"},children:0===T.length?Object(q.jsx)("div",{}):Object(q.jsx)(I.a,{searchEnabled:!0,style:{display:"inline-block",paddingLeft:15,paddingTop:15,paddingRight:15,fontSize:18,fontWeight:"normal"},dataStructure:"plain",id:"simple-treeview",items:T,width:"100%",onItemClick:function(e){console.log("ddd",e.itemData.hasOwnProperty("expanded")),e.itemData.hasOwnProperty("expanded")?(Xe(!0),i(!1)):(localStorage.setItem("current",JSON.stringify(e.itemData)),Xe(!1),i(!0)),c(e.itemData)}})}),Object(q.jsx)(g.a,{orientation:"horizontal"}),Object(q.jsx)(d.a,{item:!0,xs:12,style:{textAlign:"start",maxHeight:"100%",overflow:"auto"},children:Object(q.jsx)("div",{style:{paddingLeft:20,paddingTop:20},children:Object(q.jsxs)(d.a,{item:!0,xs:12,direction:"row",children:[Object(q.jsx)(j.a,{variant:"subtitle1",gutterBottom:!0,children:"Node Color"}),Object(q.jsx)("div",{style:dt.swatch,onClick:function(){tt(!et)},children:Object(q.jsx)("div",{style:dt.color})}),et?Object(q.jsxs)("div",{style:dt.popover,children:[Object(q.jsx)("div",{style:dt.cover,onClick:function(){tt(!1)}}),Object(q.jsx)(M.a,{color:ot,onChange:function(e){v(e.rgb),ct(e.rgb)}})]}):null]})})}),Object(q.jsx)(d.a,{item:!0,xs:12,style:{textAlign:"start",maxHeight:"100%",overflow:"auto"},children:Object(q.jsxs)(p.a,{variant:"outlined",style:{width:150,marginTop:30,marginLeft:20},children:[Object(q.jsx)(h.a,{id:"demo-simple-select-outlined-label",children:"EdgeType"}),Object(q.jsxs)(O.a,{style:{fontSize:15},labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",onChange:function(e){m(e.target.value)},variant:"outlined",label:"EdgeType",defaultValue:"smoothstep",displayEmpty:!0,children:[Object(q.jsx)(x.a,{value:"smoothstep",children:"Step Edge"}),Object(q.jsx)(x.a,{value:"default",children:"Curved Edge"})]})]})})]}),Object(q.jsx)(g.a,{orientation:"horizontal"}),Object(q.jsxs)(d.a,{item:!0,xs:12,style:(t={height:"30vh",textAlign:"center",backgroundColor:"#F2F2F2"},Object(l.a)(t,"height","320px"),Object(l.a)(t,"overflowY","scroll"),t),children:[Object(q.jsx)(j.a,{variant:"h5",gutterBottom:!0,style:{padding:10},children:"Tags"}),Object(q.jsx)(u.a,{onClick:function(){return re(!0)},variant:"outlined",color:"primary",startIcon:Object(q.jsx)(w.a,{}),children:"New Tag"}),Object(q.jsxs)(A.a,{open:ie,onClose:it,"aria-labelledby":"form-dialog-title",children:[Object(q.jsx)(J.a,{id:"form-dialog-title",children:"Create New Tag"}),Object(q.jsx)(P.a,{children:Object(q.jsx)(N.a,{error:!!xe.value,autoFocus:!0,margin:"dense",id:"tag",label:"Tag Name",helperText:xe.value&&xe.msg,onChange:function(e){Se(e.target.value)},fullWidth:!0})}),Object(q.jsxs)(F.a,{children:[Object(q.jsx)(u.a,{onClick:it,color:"primary",children:"Cancel"}),Object(q.jsx)(u.a,{onClick:function(){if(0===ye.length)me({value:!0,msg:"Tag name can not be empty."});else if(we.includes(ye))me({value:!0,msg:"Tag must be unique."});else{console.log(we),console.log(ye);var e=Object(s.a)(we);e.push(ye),Te((function(e){return Object(s.a)(e).concat([ye])})),st(e),localStorage.setItem("tags",JSON.stringify(e)),me({}),re(!1),console.log(we)}},color:"primary",children:"Submit"})]})]}),Object(q.jsxs)(H.a,{children:[we.map((function(e){return Object(q.jsxs)(D.a,{children:[Object(q.jsx)(z.a,{children:Object(q.jsx)(V.a,{children:Object(q.jsx)(E.a,{})})}),Object(q.jsx)(W.a,{primary:e}),Object(q.jsxs)(Y.a,{children:[Object(q.jsx)(b.a,{edge:"end","aria-label":"edit",color:"primary",onClick:function(){De(e),Ee(!0)},children:Object(q.jsx)(L.a,{})}),Object(q.jsx)(b.a,{edge:"end","aria-label":"delete",color:"primary",onClick:function(){return function(e){var t=Object(s.a)(we),n=we.findIndex((function(t){return t===e}));t.splice(n,1),Te(t),st(t),localStorage.setItem("tags",JSON.stringify(t))}(e)},children:Object(q.jsx)(y.a,{})})]})]})})),Object(q.jsxs)(A.a,{open:Re,onClose:it,"aria-labelledby":"form-dialog-title",children:[Object(q.jsx)(J.a,{id:"form-dialog-title",children:"Edit Tag"}),Object(q.jsx)(P.a,{children:Object(q.jsx)(N.a,{error:!!Me.value,autoFocus:!0,type:"text",margin:"dense",id:"tag",defaultValue:He,label:"Tag Name",helperText:Me.value&&Me.msg,onChange:function(e){Ve(e.target.value)},fullWidth:!0})}),Object(q.jsxs)(F.a,{children:[Object(q.jsx)(u.a,{onClick:it,color:"primary",children:"Cancel"}),Object(q.jsx)(u.a,{onClick:function(){return function(e){if(0===We.length)qe({value:!0,msg:"Tag name can not be empty."});else if(we.includes(We))qe({value:!0,msg:"Tag must be unique."});else{var t=Object(s.a)(we);t[we.indexOf(e)]=We,Te(t),st(t),localStorage.setItem("tags",JSON.stringify(t)),qe({}),Ee(!1),De(!1),Ve(!1)}}(He)},color:"primary",children:"Submit"})]})]})]})]})]})},K=n(33),Q=n.n(K),X=n(122),Z=n(86),$=n(817),ee=n(816),te=n(818),ne=n(806),ae=n(815),oe=n(180),ce=n.n(oe),ie=n(385),re=n(179),le=n.n(re),se=n(383),de=n.n(se),je=n(43),be=n(805),ue=n(812),ge=n(808),pe=n(236),he=n.n(pe),Oe=new he.a.graphlib.Graph;Oe.setDefaultEdgeLabel((function(){return{}}));var xe=170,me=170,fe=Object(be.a)((function(e){return Object(ue.a)({previewChip:{minWidth:160,maxWidth:210}})})),ve=function(e){e.fitView()},ye=function(e){var t=e.data;return Object(q.jsxs)("div",{children:[Object(q.jsxs)("div",{style:{borderColor:"rgba(".concat(t.color.r,", ").concat(t.color.g,", ").concat(t.color.b,", ").concat(t.color.a,")"),color:"black",padding:10,border:"2px solid rgba(".concat(t.color.r,", ").concat(t.color.g,", ").concat(t.color.b,", ").concat(t.color.a,")"),width:150,minHeight:10,borderRadius:"10px 10px 0px 0px",textAlign:"center"},children:[Object(q.jsx)(je.c,{type:"target",position:"top",style:{background:"black"}}),Object(q.jsx)("div",{style:{width:"93%",overflowWrap:"break-word",marginLeft:10,marginRight:300},children:Object(q.jsx)(j.a,{variant:"subtitle2",gutterBottom:!0,style:{margin:"auto"},children:t.title})})]}),Object(q.jsx)("div",{style:{background:"white",border:"2px solid rgba(".concat(t.color.r,", ").concat(t.color.g,", ").concat(t.color.b,", ").concat(t.color.a,")"),color:"black",padding:10,width:150,minHeight:40,borderRadius:"0px 0px 10px 10px",textAlign:"center"},children:Object(q.jsx)("div",{style:{width:"93%",minHeight:"40px",overflowWrap:"break-word",marginLeft:10,marginRight:300},children:Object(q.jsx)(j.a,{variant:"subtitle2",gutterBottom:!0,style:{margin:"auto"},children:t.description})})}),Object(q.jsx)(je.c,{type:"source",position:"bottom",style:{background:"black"},isConnectable:!0})]})},Se=function(e){var t=e.data;return Object(q.jsxs)("div",{style:{borderColor:"rgba(".concat(t.color.r,", ").concat(t.color.g,", ").concat(t.color.b,", ").concat(t.color.a,")"),color:"black",padding:10,border:"2px solid rgba(".concat(t.color.r,", ").concat(t.color.g,", ").concat(t.color.b,", ").concat(t.color.a,")"),width:150,minHeight:70,textAlign:"center",borderRadius:"50px"},children:[Object(q.jsx)(je.c,{type:"target",position:"top",style:{background:"black"}}),Object(q.jsx)("div",{style:{width:"93%",overflowWrap:"break-word",marginLeft:10,marginRight:300},children:Object(q.jsx)(j.a,{variant:"subtitle2",gutterBottom:!0,style:{margin:"auto"},children:t.title.substring(0,27)})}),Object(q.jsx)(je.c,{type:"source",position:"bottom",style:{background:"black"},isConnectable:!0})]})},ke=function(e){var t=e.data;return Object(q.jsxs)("div",{style:{borderColor:"rgba(".concat(t.color.r,", ").concat(t.color.g,", ").concat(t.color.b,", ").concat(t.color.a,")"),color:"black",padding:10,border:"2px solid rgba(".concat(t.color.r,", ").concat(t.color.g,", ").concat(t.color.b,", ").concat(t.color.a,")"),width:150,minHeight:70,textAlign:"center",borderRadius:"10px"},children:[Object(q.jsx)(je.c,{type:"target",position:"top",style:{background:"black"}}),Object(q.jsx)("div",{style:{width:"93%",overflowWrap:"break-word",marginLeft:10,marginRight:300},children:Object(q.jsx)(j.a,{variant:"subtitle2",gutterBottom:!0,style:{margin:"auto"},children:t.title})}),Object(q.jsx)(je.c,{type:"source",position:"bottom",style:{background:"black"},isConnectable:!0})]})},Ce=function(e){var t=e.data;return Object(q.jsxs)("div",{children:[Object(q.jsx)("div",{style:{backgroundColor:"white",color:"black",padding:10,border:"2px solid rgba(".concat(t.color.r,", ").concat(t.color.g,", ").concat(t.color.b,", ").concat(t.color.a,")"),width:100,minHeight:100,textAlign:"center",borderRadius:"5px",transform:"rotate(45deg)"},children:Object(q.jsx)("div",{style:{transform:"rotate(-45deg)",marginTop:35},children:Object(q.jsx)("div",{style:{width:"93%",minHeight:"40px",overflowWrap:"break-word",marginLeft:10,marginRight:300},children:Object(q.jsx)(j.a,{variant:"subtitle2",gutterBottom:!0,style:{margin:"auto"},children:t.title})})})}),Object(q.jsx)(je.c,{type:"source",position:"bottom",style:{background:"black"},isConnectable:!0}),Object(q.jsx)(je.c,{type:"target",position:"top",style:{background:"black"}})]})},we=function(e){var t=e.currentFile,n=e.selectedColor,c=e.edgeType,i=Object(a.useState)([]),l=Object(r.a)(i,2),p=l[0],h=l[1],m=Object(a.useState)({}),f=Object(r.a)(m,2),v=f[0],S=f[1],k=Object(a.useState)(!1),C=Object(r.a)(k,2),T=C[0],I=C[1],R=Object(a.useState)(!1),E=Object(r.a)(R,2),B=E[0],H=E[1],D=Object(a.useState)(!1),z=Object(r.a)(D,2),Y=z[0],W=z[1],V=Object(a.useState)(!1),_=Object(r.a)(V,2),U=_[0],K=_[1],oe=o.a.useState(!1),re=Object(r.a)(oe,2),se=re[0],be=re[1],ue=Object(a.useState)(!1),pe=Object(r.a)(ue,2),we=pe[0],Te=pe[1],Ie=Object(a.useState)(""),Ne=Object(r.a)(Ie,2),Ae=Ne[0],Fe=Ne[1],Pe=Object(a.useState)(!1),Je=Object(r.a)(Pe,2),Re=Je[0],Ee=Je[1],Be=Object(a.useState)({r:"193",g:"230",b:"255",a:"100"}),Le=Object(r.a)(Be,2),He=Le[0],De=Le[1],ze=Object(a.useState)([]),Ye=Object(r.a)(ze,2),We=Ye[0],Ve=(Ye[1],Object(a.useState)({})),_e=Object(r.a)(Ve,2),Ge=_e[0],Me=(_e[1],Object(a.useState)(!0)),qe=Object(r.a)(Me,2),Ue=(qe[0],qe[1]),Ke=o.a.useState([]),Qe=Object(r.a)(Ke,2),Xe=Qe[0],Ze=Qe[1],$e=Object(a.useState)({value:!1,msg:""}),et=Object(r.a)($e,2),tt=et[0],nt=et[1],at=Object(a.useState)([]),ot=Object(r.a)(at,2),ct=ot[0],it=ot[1],rt=Object(a.useState)(!1),lt=Object(r.a)(rt,2),st=(lt[0],lt[1]),dt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];console.log(t),fetch("https://flowchart-backend.herokuapp.com/api/update-elements",{method:"POST",body:JSON.stringify({session_id:localStorage.getItem("session"),file:t.id,isDelete:n,elements:e}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){console.log(e.elements),h(JSON.parse(e.elements))}))},jt=function(){var e=Object(X.a)(Q.a.mark((function e(t){var n,a;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Object(Z.a)({},t)).type=c,e.next=4,Object(je.e)(n,p);case 4:return a=e.sent,e.next=7,h(a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),bt=function(){var e=Object(X.a)(Q.a.mark((function e(t,n){return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Y&&S(n);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ut=function e(t,n){return Object(je.g)(t,n).reduce((function(t,a){return[].concat(Object(s.a)(t),[a],Object(s.a)(e(a,n)))}),[])},gt=function(){var e=Object(X.a)(Q.a.mark((function e(t,n){var a,o,c;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:!1===Y&&n.data.isCollapsable&&(a=Object(s.a)(p),(o=Object(je.g)(n,p)).length>0&&(c=ut(n,p),console.log(c),console.log(o),o[0].isHidden?o.map((function(e){var t=Object(Z.a)({},e);t.isHidden=!1,console.log(t),a=a.map((function(n){return n.id!==e.id?(n.hasOwnProperty("target")&&n.target===e.id&&(n.isHidden=!1),n):t}))})):c.map((function(e){var t=Object(Z.a)({},e);t.isHidden=!0,console.log(t),a=a.map((function(n){return n.id!==e.id?(n.hasOwnProperty("target")&&n.target===e.id&&(n.isHidden=!0),n):t}))})),console.log(a),h(a),ft(a)));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){fetch("https://flowchart-backend.herokuapp.com/api/get-user-info",{method:"POST",body:JSON.stringify({session_id:localStorage.getItem("session")}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){console.log("testtttttttttt",e);var n=[];n=0===e.elements.length?[]:e.elements.hasOwnProperty(t.id)?e.elements[t.id]:[],console.log(n),h(n),it(e.tags)}))}),[t]);var pt,ht=function(){Te(!1)},Ot=function(){var e=Object(X.a)(Q.a.mark((function e(){var t;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=Object(s.a)(p)).map((function(e){if(e.id===v.id&&!v.data.tags.includes(Ae)){var t=Object(s.a)(v.data.tags);t.push(Ae),v.data.tags=t}})),e.next=4,h(t);case 4:ft(t),K(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),xt=function(){var e=Object(X.a)(Q.a.mark((function e(){var n;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=p.filter((function(e){return e.id!==v.id})),null!==t&&(Object(Z.a)({},t).elements=n),h(n),dt(n,t),S({});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),mt=function(){return"randomnode_".concat(+new Date+Math.random())},ft=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,n=Object(s.a)(e),a=Object(Z.a)({},t);a.elements=n,h(n),dt(n,t)},vt=function(e){var a=p?Object(s.a)(p):[];a.push({id:mt(),node:t.id,type:e,data:{title:"title",description:"special"===e?"A description":null,color:n,isCollapsable:!0,tags:[]},isHidden:!1,position:{x:100,y:0}}),Object(Z.a)({},t).elements=a,h(a)},yt=G()({default:{color:{width:"36px",height:"14px",borderRadius:"2px",background:"rgba(".concat(He.r,", ").concat(He.g,", ").concat(He.b,", ").concat(He.a,")")},swatch:{padding:"5px",borderRadius:"1px",boxShadow:"0 0 0 1px rgba(0,0,0,.1)",display:"inline-block",cursor:"pointer"},popover:{position:"absolute",zIndex:"2"},cover:{position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}}});console.log("elements",p),0===p.length?pt=[]:(console.log(p,"***********************88"),(pt=p.filter((function(e){return e.node===t.id||e.source}))).sort((function(e,t){if(e.hasOwnProperty("data")&&t.hasOwnProperty("data"))return parseInt(e.id.slice(11,24))-parseInt(t.id.slice(11,24))}))),console.log(pt),console.log(p);var St=fe();return null===t?Object(q.jsx)("div",{}):Object(q.jsxs)(q.Fragment,{children:[Object(q.jsxs)(d.a,{container:!0,spacing:3,style:{width:"80%"},children:[Object(q.jsx)(d.a,{item:!0,xs:4,style:{textAlign:"start"},children:Y&&Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(u.a,{variant:"outlined",color:"primary",startIcon:Object(q.jsx)(w.a,{}),style:{textAlign:"start",marginTop:20},onClick:function(){return Te(!0)},children:"New Node"}),Object(q.jsxs)(A.a,{open:we,onClose:ht,"aria-labelledby":"form-dialog-title",children:[Object(q.jsx)(J.a,{id:"form-dialog-title",style:{textAlign:"center"},children:"Select a Shape"}),Object(q.jsx)(P.a,{children:Object(q.jsxs)(d.a,{container:!0,direction:"column",spacing:1,children:[Object(q.jsxs)(d.a,{container:!0,direction:"row",spacing:1,children:[Object(q.jsx)(d.a,{item:!0,xs:6,children:Object(q.jsxs)("div",{onClick:function(){vt("special"),Te(!1)},children:[Object(q.jsx)("div",{style:{background:"#ADD8E6",color:"black",padding:10,border:"1px solid black",width:100,height:10,borderRadius:"10px 10px 0px 0px",textAlign:"center",cursor:"pointer"}}),Object(q.jsx)("div",{style:{background:"white",border:"1px solid black",color:"black",padding:10,width:100,height:40,borderRadius:"0px 0px 10px 10px",textAlign:"center",marginRight:"20px",cursor:"pointer"}})]})}),Object(q.jsx)(d.a,{item:!0,xs:6,children:Object(q.jsx)("div",{style:{border:"1px solid black",height:"90px",width:"130px",borderRadius:"50px",marginLeft:"10px",cursor:"pointer"},onClick:function(){vt("oval"),Te(!1)}})})]}),Object(q.jsxs)(d.a,{container:!0,direction:"row",spacing:1,style:{paddingTop:"30px",paddingBottom:"20px"},children:[Object(q.jsx)(d.a,{item:!0,xs:6,children:Object(q.jsx)("div",{style:{border:"1px solid black",height:"80px",width:"130px",borderRadius:"10px",cursor:"pointer"},onClick:function(){vt("rectangle"),Te(!1)}})}),Object(q.jsx)(d.a,{item:!0,xs:6,children:Object(q.jsx)("div",{style:{border:"1px solid black",height:"80px",width:"80px",borderRadius:"5px",transform:"rotate(45deg)",marginLeft:"30px",cursor:"pointer"},onClick:function(){vt("diamond"),Te(!1)}})})]})]})})]})]})}),Object(q.jsxs)(d.a,{item:!0,xs:2,style:{textAlign:"center"},children:[Object(q.jsx)(j.a,{variant:"h6",gutterBottom:!0,style:{paddingTop:10,fontWeight:"bold"},children:"Project: ".concat(t.parentId)}),Object(q.jsx)(j.a,{variant:"h6",gutterBottom:!0,children:"Sub Process: ".concat(t.text)})]}),Object(q.jsx)(d.a,{item:!0,xs:6,style:{textAlign:"center"},children:Object(q.jsx)(j.a,{component:"div",children:Object(q.jsxs)(d.a,{component:"label",container:!0,alignItems:"center",spacing:1,style:{paddingTop:20,paddingLeft:90},children:[Object(q.jsx)(d.a,{item:!0,children:"View"}),Object(q.jsx)(d.a,{item:!0,children:Object(q.jsx)($.a,{color:"primary",checked:Y,onChange:function(){Ue(!0),W(!Y)},name:"checked"})}),Object(q.jsx)(d.a,{item:!0,children:"Edit"}),Y&&Object(q.jsx)(u.a,{variant:"contained",color:"primary",style:{marginLeft:60},onClick:function(){ft(Object(s.a)(p))},children:"Save"}),Object(q.jsx)(u.a,{variant:"contained",color:"primary",style:{marginLeft:Y?10:60},startIcon:Object(q.jsx)(ce.a,{}),onClick:function(){be(!0)},children:"Import CSV"}),Object(q.jsx)(ie.a,{clearOnUnmount:!0,filesLimit:1,dialogTitle:Object(q.jsxs)(q.Fragment,{children:[console.log(tt),tt.value&&Object(q.jsx)(ge.a,{severity:"error",children:tt.msg}),Object(q.jsx)("span",{children:"Upload file"}),Object(q.jsx)(b.a,{style:{right:"12px",top:"8px",position:"absolute"},onClick:function(){return be(!1)},children:Object(q.jsx)(le.a,{})})]}),acceptedFiles:[".csv"],fileObjects:Xe,cancelButtonText:"cancel",showAlerts:["error","info"],submitButtonText:"submit",maxFileSize:5e6,open:se,onAdd:function(e){console.log("onAdd",e),0===Xe.length&&Ze([].concat(Xe,e))},onDelete:function(e){var t=Object(s.a)(Xe).filter((function(t){return t!==e}));Ze(t),console.log("onDelete",e)},onClose:function(){return be(!1)},onSave:function(){console.log(Xe[0]),de.a.parse(Xe[0].file,{complete:function(e){var n=e.data,a=[],o={},c={};if((n=n.slice(1)).map((function(e){var n=function(e){if(console.log(ct),0===e.length)return[];var t=e.split(",");return 0===ct.length?{value:!0,msg:"One or more of the tags provided does not exist."}:(t.map((function(e){if(!ct.includes(e))return{value:!0,msg:"One or more of the tags provided does not exist."}})),t)}(e[4]);if(console.log(n,"7777777777777777777"),console.log(e[5]),["special","oval","rectangle","diamond"].includes(e[5].toLowerCase()))if(Array.isArray(n)){if(o[e[0]]=mt(),a.push({id:o[e[0]],node:t.id,type:e[5],data:{title:e[1],description:0===e[2].length?null:e[2],color:{r:"193",g:"230",b:"255",a:"100"},tags:n,isCollapsable:"TRUE"===e[6]},isHidden:!1,position:{x:0,y:0}}),e[7].length>0&&e[7].includes(",")){var i=e[7].split(",");c[e[0]]=i}}else console.log(n),nt({value:!0,msg:"One or more of the tags provided does not exist."});else console.log("test"),nt({value:!0,msg:"A type of shape in the file does not exist."})})),console.log(a),console.log("Finished:",e.data),console.log("onSave",Xe),console.log(a.length),a.length===n.length){for(var i in console.log(o),console.log(c),c)if(c.hasOwnProperty(i))if(Array.isArray(c[i]))c[i].map((function(e){var t=Object(je.e)({source:o[i],target:o[e]},a);console.log(t),a=t}));else{var r=Object(je.e)({source:o[i],target:o[c[i]]},a);console.log(r),a=r}var l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"TB",n="LR"===t;return Oe.setGraph({rankdir:t}),e.forEach((function(e){Object(je.h)(e)?Oe.setNode(e.id,{width:xe,height:me}):Oe.setEdge(e.source,e.target)})),he.a.layout(Oe),e.map((function(e){if(Object(je.h)(e)){var t=Oe.node(e.id);e.targetPosition=n?"left":"top",e.sourcePosition=n?"right":"bottom",e.position={x:t.x-85+Math.random()/1e3,y:t.y-85}}return e}))}(a);h(l),ft(l),console.log(a),st(!0),be(!1)}}})},showPreviewsInDropzone:!1,useChipsForPreview:!0,previewGridProps:{container:{spacing:1,direction:"row"}},previewChipProps:{classes:{root:St.previewChip}},showFileNamesInPreview:!0}),Object(q.jsx)(ee.a,{open:tt.value,autoHideDuration:5e3,onClose:function(){return nt({value:!1,msg:""})},children:Object(q.jsx)(ge.a,{onClose:function(){return nt({value:!1,msg:""})},severity:"error",children:tt.msg})})]})})})]}),Object(q.jsx)(g.a,{orientation:"horizontal"}),Object(q.jsxs)(je.f,{nodeTypes:{special:ye,oval:Se,rectangle:ke,diamond:Ce},elements:0!==Object.keys(Ge).length?We:pt,onElementsRemove:function(){var e=p.filter((function(e){return e.id!==v.id}));Object(Z.a)({},t).elements=e,h(e),ft(e)},onNodeDoubleClick:bt,onElementClick:gt,onNodeDragStop:function(e,t){var n=Object(s.a)(p);n.map((function(e){e.id===t.id&&(e.position=t.position)})),h(n)},connectionLineType:c,onPaneContextMenu:function(){return Te(!0)},onConnect:jt,onLoad:ve,snapToGrid:!1,paneMoveable:!0,style:{height:"90vh",width:Y?"84%":"95%"},children:[Object(q.jsx)(je.d,{nodeStrokeColor:function(e){var t;return(null===(t=e.style)||void 0===t?void 0:t.background)?e.style.background:"special"===e.type?"#0041d0":"oval"===e.type?"#008000":"rectangle"===e.type?"#8A2BE2":"diamond"===e.type?"#00008b":"output"===e.type?"#ff0072":"default"===e.type?"#1a192b":"#eee"},nodeColor:function(e){var t;return(null===(t=e.style)||void 0===t?void 0:t.background)?e.style.background:"#fff"},nodeBorderRadius:2}),Object(q.jsx)(je.b,{}),Object(q.jsx)(je.a,{color:"#aaa",gap:16})]}),Y&&Object(q.jsx)(te.a,{variant:"permanent",anchor:"right",style:{textAlign:"center"},children:Object(q.jsx)(d.a,{item:!0,xs:12,style:{textAlign:"center",width:250,overflow:"hidden"},children:0===Object.keys(v).length?Object(q.jsx)(j.a,{variant:"h6",gutterBottom:!0,style:{paddingTop:380,paddingLeft:10,paddingRight:10},children:"Double-click on any item to get a detailed view."}):Object(q.jsxs)("div",{children:[Object(q.jsx)(j.a,{variant:"h6",style:{marginTop:40},children:"Edit Title"}),Object(q.jsx)(N.a,{name:v.id,defaultValue:v.data.title,margin:"normal",onChange:function(e){var t=Object(s.a)(p);t.map((function(t){var n;t.id===e.target.name&&(n=e.target.value.length>=27?e.target.value.substring(0,27):e.target.value,t.data.title=n)})),h(t),ft(t)},disabled:!T,style:{width:"90%"},value:v.data.title,InputProps:{endAdornment:Object(q.jsx)(ne.a,{position:"end",children:Object(q.jsx)(b.a,{onClick:function(){I(!0)},children:Object(q.jsx)(L.a,{})})})}}),"special"===v.type&&Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(j.a,{variant:"h6",style:{marginTop:20},children:"Edit Description"}),Object(q.jsx)(N.a,{name:v.id,defaultValue:v.data.description,margin:"normal",onChange:function(e){var t=Object(s.a)(p);t.map((function(t){t.id===e.target.name&&(t.data.description=e.target.value)})),h(t),ft(t)},disabled:!B,style:{width:"90%"},value:v.data.description,InputProps:{endAdornment:Object(q.jsx)(ne.a,{position:"end",children:Object(q.jsx)(b.a,{onClick:function(){H(!0)},children:Object(q.jsx)(L.a,{})})})}})]}),Object(q.jsx)(g.a,{style:{marginTop:10}}),Object(q.jsx)(u.a,{variant:"outlined",color:"primary",startIcon:Object(q.jsx)(w.a,{size:"medium"}),onClick:function(){return K(!0)},style:{marginTop:20},children:"Add Tag"}),Object(q.jsxs)(A.a,{open:U,onClose:ht,"aria-labelledby":"form-dialog-title",children:[Object(q.jsx)(J.a,{id:"form-dialog-title",children:"Add Tag"}),Object(q.jsx)(P.a,{children:Object(q.jsxs)(O.a,{labelId:"demo-simple-select-placeholder-label-label",id:"demo-simple-select-placeholder-label",value:Ae,onChange:function(e){Fe(e.target.value)},fullWidth:!0,displayEmpty:!0,children:[Object(q.jsx)(x.a,{value:"",children:Object(q.jsx)("em",{children:"None"})}),null!==localStorage.getItem("tags")&&JSON.parse(localStorage.getItem("tags")).length>0?JSON.parse(localStorage.getItem("tags")).map((function(e){return Object(q.jsx)(x.a,{value:e,children:e})})):Object(q.jsx)("div",{})]})}),Object(q.jsxs)(F.a,{children:[Object(q.jsx)(u.a,{onClick:ht,color:"primary",children:"Cancel"}),Object(q.jsx)(u.a,{onClick:Ot,color:"primary",children:"Add"})]})]}),Object(q.jsx)(g.a,{style:{marginTop:20,marginBottom:10}}),v.data.tags.length>0&&v.data.tags.map((function(e){return Object(q.jsx)(ae.a,{label:e,color:"secondary",style:{marginBottom:10}})})),Object(q.jsx)(g.a,{orientation:"horizontal",style:{marginTop:10}}),Object(q.jsx)(j.a,{component:"div",children:Object(q.jsxs)(d.a,{component:"label",container:!0,alignItems:"center",spacing:1,style:{paddingTop:20,paddingLeft:40},children:[Object(q.jsx)(d.a,{item:!0,children:Object(q.jsx)($.a,{color:"primary",checked:v.data.isCollapsable,onChange:function(){console.log("YYYYYYYYYYYYYGUKB");var e=Object(s.a)(p);e.map((function(e){e.id===v.id&&(console.log(!e.data.isCollapsable),e.data.isCollapsable=!e.data.isCollapsable,S(e))})),ft(e)},name:"checked"})}),Object(q.jsx)(d.a,{item:!0,children:"Collapsable"})]})}),Object(q.jsx)(g.a,{orientation:"horizontal",style:{marginTop:10}}),Object(q.jsx)(d.a,{item:!0,xs:12,style:{textAlign:"center",maxHeight:"100%",overflow:"auto"},children:Object(q.jsx)("div",{style:{paddingLeft:20,paddingTop:20},children:Object(q.jsxs)(d.a,{item:!0,xs:12,children:[Object(q.jsx)(j.a,{variant:"subtitle1",gutterBottom:!0,children:"Node Color"}),Object(q.jsx)("div",{style:yt.swatch,onClick:function(){Ee(!Re)},children:Object(q.jsx)("div",{style:yt.color})}),Re?Object(q.jsxs)("div",{style:yt.popover,children:[Object(q.jsx)("div",{style:yt.cover,onClick:function(){Ee(!1)}}),Object(q.jsx)(M.a,{color:He,onChange:function(e){De(e.rgb);var t=Object(s.a)(p);t.map((function(t){t.id===v.id&&(t.data.color=e.rgb)})),h(t),ft(t)}})]}):null]})})}),Object(q.jsx)(g.a,{style:{marginTop:20,marginBottom:10}}),Object(q.jsx)(b.a,{style:{color:"red"},onClick:function(){return xt()},children:Object(q.jsx)(y.a,{})})]})})})]})},Te=n(384),Ie=n.n(Te),Ne=n(809);var Ae=function(){var e=Object(a.useState)(null===localStorage.getItem("current")?{}:JSON.parse(localStorage.getItem("current"))),t=Object(r.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)(!1),i=Object(r.a)(c,2),l=i[0],s=i[1],j=Object(a.useState)({r:"193",g:"230",b:"255",a:"100"}),b=Object(r.a)(j,2),u=b[0],g=b[1],p=Object(a.useState)("smoothstep"),h=Object(r.a)(p,2),O=h[0],x=h[1];return Object(a.useEffect)((function(){if(null===localStorage.getItem("session")){var e=Ie.a.sign({userId:Object(Ne.a)()},"secretkey",{expiresIn:"1h",algorithm:"HS256"});!function(e){fetch("https://flowchart-backend.herokuapp.com/api/update-session",{method:"POST",body:JSON.stringify({session_id:e}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return console.log(e)}))}(e),localStorage.setItem("session",e)}}),[]),Object(q.jsxs)(d.a,{container:!0,spacing:3,children:[Object(q.jsx)(d.a,{item:!0,xs:5,sm:5,md:2,lg:2,children:Object(q.jsx)(U,{currentFile:n,setCurrentFile:o,setCanvasVisibility:function(e){return s(e)},setEdgeType:x,setSelectedColor:g})}),l&&Object(q.jsx)(d.a,{item:!0,xs:7,sm:7,md:10,lg:10,children:Object(q.jsx)(we,{currentFile:n,setCurrentFile:o,selectedColor:u,edgeType:O})})]})};i.a.render(Object(q.jsx)(o.a.StrictMode,{children:Object(q.jsx)(Ae,{})}),document.getElementById("root"))}},[[740,1,2]]]);
//# sourceMappingURL=main.55425fa5.chunk.js.map