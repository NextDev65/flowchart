(this.webpackJsonpflowchart=this.webpackJsonpflowchart||[]).push([[0],{496:function(e,t,a){e.exports=a(919)},501:function(e,t,a){},502:function(e,t,a){},802:function(e,t){},804:function(e,t){},818:function(e,t){},820:function(e,t){},848:function(e,t){},850:function(e,t){},851:function(e,t){},856:function(e,t){},858:function(e,t){},864:function(e,t){},866:function(e,t){},885:function(e,t){},897:function(e,t){},900:function(e,t){},919:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(21),l=a.n(r),c=(a(501),a(11)),i=(a(502),a(41)),s=a(23),d=a(968),u=a(117),m=a(920),g=a(979),p=a(980),b=a(974),f=a(975),h=a(991),E=a(981),y=a(922),v=a(998),x=a(982),O=a(993),j=a(464),k=a.n(j),C=a(113),w=a.n(C),S=a(465),T=a.n(S),A=a(114),I=a.n(A),N=a(452),R=a.n(N),z=(a(606),a(994)),P=a(969),F=a(978),B=a(971),L=a(970),D=a(466),J=a.n(D),M=a(134),H=a.n(M),Y=a(977),W=a(923),_=a(983),V=a(985),X=a(984),U=a(995),G=a(6),q=a.n(G),K=a(158),$=a(990),Q=a(967),Z=a(462),ee=a.n(Z),te=a(463),ae=a.n(te),ne="https://flowchart-backend.herokuapp.com",oe=function(e){var t,a=e.currentFile,r=e.setCurrentFile,l=e.setCanvasVisibility,j=e.setEdgeType,C=e.setSelectedColor,S=e.isEditMode,A=e.setOrientation,N=e.orientation,D=Object(n.useState)([]),M=Object(c.a)(D,2),G=M[0],Z=M[1],te=Object(n.useState)(""),oe=Object(c.a)(te,2),re=oe[0],le=oe[1],ce=Object(n.useState)(""),ie=Object(c.a)(ce,2),se=ie[0],de=ie[1],ue=o.a.useState(!1),me=Object(c.a)(ue,2),ge=me[0],pe=me[1],be=Object(n.useState)(!1),fe=Object(c.a)(be,2),he=fe[0],Ee=fe[1],ye=Object(n.useState)({value:!1,msg:""}),ve=Object(c.a)(ye,2),xe=ve[0],Oe=ve[1],je=Object(n.useState)([]),ke=Object(c.a)(je,2),Ce=ke[0],we=ke[1],Se=Object(n.useState)({}),Te=Object(c.a)(Se,2),Ae=Te[0],Ie=Te[1],Ne=Object(n.useState)(""),Re=Object(c.a)(Ne,2),ze=Re[0],Pe=Re[1],Fe=Object(n.useState)([]),Be=Object(c.a)(Fe,2),Le=Be[0],De=Be[1],Je=o.a.useState(!1),Me=Object(c.a)(Je,2),He=Me[0],Ye=Me[1],We=Object(n.useState)(!1),_e=Object(c.a)(We,2),Ve=_e[0],Xe=_e[1],Ue=Object(n.useState)(""),Ge=Object(c.a)(Ue,2),qe=Ge[0],Ke=Ge[1],$e=Object(n.useState)(""),Qe=Object(c.a)($e,2),Ze=Qe[0],et=Qe[1],tt=Object(n.useState)({}),at=Object(c.a)(tt,2),nt=at[0],ot=at[1],rt=Object(n.useState)(!1),lt=Object(c.a)(rt,2),ct=lt[0],it=lt[1],st=Object(n.useState)(!1),dt=Object(c.a)(st,2),ut=dt[0],mt=dt[1],gt=Object(n.useState)({r:"193",g:"230",b:"255",a:"100"}),pt=Object(c.a)(gt,2),bt=pt[0],ft=pt[1],ht=Object(n.useState)(0),Et=Object(c.a)(ht,2),yt=Et[0],vt=Et[1];Object(n.useEffect)((function(){fetch("".concat(ne,"/api/get-user-info"),{method:"POST",body:JSON.stringify({session_id:localStorage.getItem("session")}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t,a,n;console.log("testtttttttttt",e),t=Array.isArray(e.tags)?e.tags:JSON.parse(e.tags).hasOwnProperty("tags")?JSON.parse(e.tags).tags:JSON.parse(e.tags),a=Array.isArray(e.names)?e.names:Array.isArray(JSON.parse(e.names))?JSON.parse(e.names):JSON.parse(e.names).names,n=Array.isArray(e.files)?e.files:Array.isArray(JSON.parse(e.files))?JSON.parse(e.files):JSON.parse(e.files).files,console.log(t),console.log(a),console.log(n),De(t),we(a),Z(JSON.parse(e.files))}))}),[]);var xt=function(){le(""),de(""),Ee(!1),Xe(!1),Ke(!1),et(!1),ot(!1),Oe({}),ge?pe(!1):Ye(!1)},Ot=function(e){console.log("updating database...."),fetch("".concat(ne,"/api/update-files"),{method:"POST",body:JSON.stringify({session_id:localStorage.getItem("session"),files:e}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){console.log(e,"ndsojdmsio99999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999"),Z(JSON.parse(e.files))}))},jt=function(e){console.log("updating database...."),fetch("".concat(ne,"/api/update-names"),{method:"POST",body:JSON.stringify({session_id:localStorage.getItem("session"),names:e}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return we(e.names)}))},kt=function(e){console.log("updating database...."),fetch("".concat(ne,"/api/update-tags"),{method:"POST",body:JSON.stringify({session_id:localStorage.getItem("session"),tags:e}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){console.log(JSON.parse(e.tags)),De(JSON.parse(e.tags))}))};Object(n.useEffect)((function(){!function(e){if(G.length>0)e.filter((function(e){return e.hasOwnProperty("parentId")||e.hasOwnProperty("elements")}));G.length&&!ct?l(!0):l(!1)}(G)}),[G,l]);var Ct=function(e,t){e.dataTransfer.setData("application/reactflow",t),e.dataTransfer.effectAllowed="move"},wt=q()({default:{color:{width:"36px",height:"14px",borderRadius:"2px",background:"rgba(".concat(bt.r,", ").concat(bt.g,", ").concat(bt.b,", ").concat(bt.a,")")},swatch:{padding:"5px",borderRadius:"1px",boxShadow:"0 0 0 1px rgba(0,0,0,.1)",display:"inline-block",cursor:"pointer"},popover:{position:"absolute",zIndex:"2"},cover:{position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}}});return o.a.createElement("div",null,o.a.createElement($.a,{value:yt,onChange:function(e,t){console.log(t),vt(t)},variant:"fullWidth",indicatorColor:"primary",tabItemContainerStyle:{width:"100%"},textColor:"primary","aria-label":"icon label tabs example"},o.a.createElement(Q.a,{icon:o.a.createElement(ee.a,null),label:"Files"}),o.a.createElement(Q.a,{icon:o.a.createElement(ae.a,null),label:"Shapes"})),0===yt?o.a.createElement(d.a,{item:!0,xs:12,style:{height:"70vh",textAlign:"center",borderRight:"solid #D5D5D5 1px"}},o.a.createElement(u.a,{variant:"h5",gutterBottom:!0,style:{padding:20}},"Folder Structures"),o.a.createElement(d.a,{container:!0,spacing:0,justifyContent:"center"},o.a.createElement(d.a,{item:!0,xs:4},o.a.createElement(m.a,{"aria-label":"Add Folder",onClick:function(){pe(!0)},color:"primary"},o.a.createElement(k.a,{fontSize:"medium"}))),o.a.createElement(P.a,{open:ge,onClose:xt,"aria-labelledby":"form-dialog-title"},o.a.createElement(L.a,{id:"form-dialog-title"},"Create New Folder"),o.a.createElement(B.a,null,o.a.createElement(z.a,{error:!!xe.value,autoFocus:!0,margin:"dense",id:"folder",label:"Folder Name",helperText:xe.value&&xe.msg,onChange:function(e){le(e.target.value)},fullWidth:!0})),o.a.createElement(F.a,null,o.a.createElement(g.a,{onClick:xt,color:"primary"},"Cancel"),o.a.createElement(g.a,{onClick:function(){if(0===re.length)Oe({value:!0,msg:"Folder name can not be empty."});else if(Ce.includes(re))Oe({value:!0,msg:"Folder must be unique."});else{var e=G.length>0?Object(s.a)(G):[];e.push({id:re,text:re,expanded:!0}),Z(e),Ot(e),localStorage.setItem("files",JSON.stringify(e));var t=0===Ce.length?[]:Object(s.a)(Ce);t.push(re),console.log(re),we(t),jt(t),localStorage.setItem("names",JSON.stringify(t)),Oe({}),pe(!1)}},color:"primary"},"Submit"))),o.a.createElement(d.a,{item:!0,xs:4},o.a.createElement(m.a,{"aria-label":"Add File",color:"primary",onClick:function(){Ye(!0)},disabled:!a.hasOwnProperty("expanded")},o.a.createElement(T.a,{fontSize:"medium"}))),o.a.createElement(P.a,{open:He,onClose:xt,"aria-labelledby":"form-dialog-title"},o.a.createElement(L.a,{id:"form-dialog-title"},"Create New File"),o.a.createElement(B.a,null,o.a.createElement(z.a,{error:!!xe.value,autoFocus:!0,margin:"dense",id:"file",label:"File Name",onChange:function(e){de(e.target.value)},helperText:xe.value&&xe.msg,fullWidth:!0})),o.a.createElement(F.a,null,o.a.createElement(g.a,{onClick:xt,color:"primary"},"Cancel"),o.a.createElement(g.a,{onClick:function(){if(0===se.length)Oe({value:!0,msg:"File name can not be empty."});else if(Ce.includes(se))Oe({value:!0,msg:"File name must be unique."});else{var e=Object(s.a)(G);if(e[0].hasOwnProperty("parentId"))Oe({value:!0,msg:"You must have folder to create a file."});else{e.push({id:se,text:se,parentId:a.id,elements:[]}),Z(e),Ot(e);var t=0===Ce.length?[]:Object(s.a)(Ce);t.push(se),we(t),jt(t),Oe({}),Ye(!1)}}},color:"primary"},"Submit"))),o.a.createElement(d.a,{item:!0,xs:4},o.a.createElement(m.a,{"aria-label":"Delete",color:"secondary",onClick:function(){var e=Object(s.a)(G),t=G.findIndex((function(e){return e===a}));e.splice(t,1);var n=Object(s.a)(Ce),o=Ce.indexOf(a.id);n.splice(o,1),we(n),jt(n),Ot(e),localStorage.removeItem("current");var l=a.elements.filter((function(e){return a.id!==e.node}));r({}),function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log("updating database...."),fetch("".concat(ne,"/api/update-elements"),{method:"POST",body:JSON.stringify({session_id:localStorage.getItem("session"),file:a.id,isDelete:t,elements:e}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return console.log(e)}))}(l,!0)},disabled:0===Object.keys(a).length},o.a.createElement(w.a,{fontSize:"medium"})))),o.a.createElement(p.a,{style:{marginTop:20},orientation:"horizontal"}),o.a.createElement(d.a,{item:!0,xs:12,style:{textAlign:"start",maxHeight:"100%",overflow:"auto"}},0===G.length?o.a.createElement("div",null):o.a.createElement(R.a,{searchEnabled:!0,style:{display:"inline-block",paddingLeft:15,paddingTop:15,paddingRight:15,fontSize:18,fontWeight:"normal"},dataStructure:"plain",id:"simple-treeview",items:G,width:"100%",onItemClick:function(e){console.log("ddd",e.itemData.hasOwnProperty("expanded")),e.itemData.hasOwnProperty("expanded")?(it(!0),l(!1)):(localStorage.setItem("current",JSON.stringify(e.itemData)),it(!1),l(!0)),r(e.itemData)}})),o.a.createElement(p.a,{style:{marginTop:20},orientation:"horizontal"}),S&&o.a.createElement(d.a,{container:!0,direction:"column",style:{marginTop:30},spacing:1},o.a.createElement(d.a,{container:!0,direction:"row",spacing:1},o.a.createElement(d.a,{item:!0,xs:6},o.a.createElement("div",{onDragStart:function(e){return Ct(e,"special")},draggable:!0},o.a.createElement("div",{style:{background:"#ADD8E6",color:"black",padding:10,border:"1px solid black",width:50,height:5,borderRadius:"10px 10px 0px 0px",textAlign:"center",marginLeft:20,cursor:"pointer"}}),o.a.createElement("div",{style:{background:"white",border:"1px solid black",color:"black",padding:10,width:50,height:15,borderRadius:"0px 0px 10px 10px",textAlign:"center",marginLeft:20,cursor:"pointer"}}))),o.a.createElement(d.a,{item:!0,xs:6},o.a.createElement("div",{style:{border:"1px solid black",height:"60px",width:"80px",borderRadius:"50px",cursor:"pointer"},onDragStart:function(e){return Ct(e,"oval")},draggable:!0}))),o.a.createElement(d.a,{container:!0,direction:"row",spacing:1,style:{paddingTop:"30px",paddingBottom:"20px"}},o.a.createElement(d.a,{item:!0,xs:6},o.a.createElement("div",{style:{border:"1px solid black",height:"50px",width:"80px",borderRadius:"10px",cursor:"pointer",marginLeft:20},onDragStart:function(e){return Ct(e,"rectangle")},draggable:!0})),o.a.createElement(d.a,{item:!0,xs:6},o.a.createElement("div",{style:{border:"1px solid black",height:"50px",width:"50px",borderRadius:"5px",transform:"rotate(45deg)",marginLeft:"10px",cursor:"pointer"},onDragStart:function(e){return Ct(e,"diamond")},draggable:!0}))))):o.a.createElement(d.a,{item:!0,xs:12,style:{height:"70vh",textAlign:"center",borderRight:"solid #D5D5D5 1px"}},o.a.createElement(u.a,{variant:"h5",gutterBottom:!0,style:{padding:20}},"Shapes Settings"),o.a.createElement(d.a,{item:!0,xs:12,style:{textAlign:"start",maxHeight:"100%",overflow:"auto"}},o.a.createElement("div",{style:{paddingLeft:20,paddingTop:20}},o.a.createElement(d.a,{item:!0,xs:12,direction:"row"},o.a.createElement(u.a,{variant:"subtitle1",gutterBottom:!0},"Node Color"),o.a.createElement("div",{style:wt.swatch,onClick:function(){mt(!ut)}},o.a.createElement("div",{style:wt.color})),ut?o.a.createElement("div",{style:wt.popover},o.a.createElement("div",{style:wt.cover,onClick:function(){mt(!1)}}),o.a.createElement(K.a,{color:bt,onChange:function(e){C(e.rgb),ft(e.rgb)}})):null))),o.a.createElement(d.a,{item:!0,xs:12,style:{textAlign:"start",maxHeight:"100%",overflow:"auto"}},o.a.createElement(b.a,{variant:"outlined",style:{width:150,marginTop:30,marginLeft:20}},o.a.createElement(f.a,{id:"demo-simple-select-outlined-label"},"EdgeType"),o.a.createElement(h.a,{style:{fontSize:15},labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",onChange:function(e){j(e.target.value)},variant:"outlined",label:"EdgeType",defaultValue:"smoothstep",displayEmpty:!0},o.a.createElement(E.a,{value:"smoothstep"},"Step Edge"),o.a.createElement(E.a,{value:"default"},"Curved Edge")))),!S&&o.a.createElement(b.a,{component:"fieldset",style:{marginTop:30}},o.a.createElement(y.a,{component:"legend"},"Orientation"),o.a.createElement(v.a,{"aria-label":"Orientation",name:"orientation",value:N,onChange:function(e){A(e.target.value)}},o.a.createElement(x.a,{value:"vertical",control:o.a.createElement(O.a,null),label:"Vertical"}),o.a.createElement(x.a,{value:"horizontal",control:o.a.createElement(O.a,null),label:"Horizontal"})))),o.a.createElement(p.a,{orientation:"horizontal"}),o.a.createElement(d.a,{item:!0,xs:12,style:(t={height:"30vh",textAlign:"center",backgroundColor:"#F2F2F2"},Object(i.a)(t,"height","320px"),Object(i.a)(t,"overflowY","scroll"),t)},o.a.createElement(u.a,{variant:"h5",gutterBottom:!0,style:{padding:10}},"Tags"),o.a.createElement(g.a,{onClick:function(){return Ee(!0)},variant:"outlined",color:"primary",startIcon:o.a.createElement(I.a,null)},"New Tag"),o.a.createElement(P.a,{open:he,onClose:xt,"aria-labelledby":"form-dialog-title"},o.a.createElement(L.a,{id:"form-dialog-title"},"Create New Tag"),o.a.createElement(B.a,null,o.a.createElement(z.a,{error:!!Ae.value,autoFocus:!0,margin:"dense",id:"tag",label:"Tag Name",helperText:Ae.value&&Ae.msg,onChange:function(e){Pe(e.target.value)},fullWidth:!0})),o.a.createElement(F.a,null,o.a.createElement(g.a,{onClick:xt,color:"primary"},"Cancel"),o.a.createElement(g.a,{onClick:function(){if(0===ze.length)Ie({value:!0,msg:"Tag name can not be empty."});else if(Le.includes(ze))Ie({value:!0,msg:"Tag must be unique."});else{console.log(Le),console.log(ze);var e=Object(s.a)(Le);e.push(ze),De((function(e){return Object(s.a)(e).concat([ze])})),kt(e),localStorage.setItem("tags",JSON.stringify(e)),Ie({}),Ee(!1),console.log(Le)}},color:"primary"},"Submit"))),o.a.createElement(Y.a,null,Le.map((function(e){return o.a.createElement(W.a,null,o.a.createElement(_.a,null,o.a.createElement(U.a,null,o.a.createElement(J.a,null))),o.a.createElement(X.a,{primary:e}),o.a.createElement(V.a,null,o.a.createElement(m.a,{edge:"end","aria-label":"edit",color:"primary",onClick:function(){Ke(e),Xe(!0)}},o.a.createElement(H.a,null)),o.a.createElement(m.a,{edge:"end","aria-label":"delete",color:"primary",onClick:function(){return function(e){var t=Object(s.a)(Le),a=Le.findIndex((function(t){return t===e}));t.splice(a,1),De(t),kt(t),localStorage.setItem("tags",JSON.stringify(t))}(e)}},o.a.createElement(w.a,null))))})),o.a.createElement(P.a,{open:Ve,onClose:xt,"aria-labelledby":"form-dialog-title"},o.a.createElement(L.a,{id:"form-dialog-title"},"Edit Tag"),o.a.createElement(B.a,null,o.a.createElement(z.a,{error:!!nt.value,autoFocus:!0,type:"text",margin:"dense",id:"tag",defaultValue:qe,label:"Tag Name",helperText:nt.value&&nt.msg,onChange:function(e){et(e.target.value)},fullWidth:!0})),o.a.createElement(F.a,null,o.a.createElement(g.a,{onClick:xt,color:"primary"},"Cancel"),o.a.createElement(g.a,{onClick:function(){return function(e){if(0===Ze.length)ot({value:!0,msg:"Tag name can not be empty."});else if(Le.includes(Ze))ot({value:!0,msg:"Tag must be unique."});else{var t=Object(s.a)(Le);t[Le.indexOf(e)]=Ze,De(t),kt(t),localStorage.setItem("tags",JSON.stringify(t)),ot({}),Xe(!1),Ke(!1),et(!1)}}(qe)},color:"primary"},"Submit"))))))},re=a(44),le=a.n(re),ce=a(115),ie=a(50),se=a(988),de=a(1e3),ue=a(1001),me=a(989),ge=a(999),pe=a(218),be=a.n(pe),fe=a(476),he=a(217),Ee=a.n(he),ye=a(473),ve=a.n(ye),xe=a(17),Oe=a(987),je=a(996),ke=a(992),Ce=a(285),we=a.n(Ce);a(797),a(798);function Se(e){e.source,e.target;var t=e.id,a=e.sourceX,n=e.sourceY,r=e.targetX,l=e.targetY,c=e.sourcePosition,i=e.targetPosition,s=(e.animated,e.style),d=void 0===s?{}:s,u=e.data,m="smoothstep"===u.type?Object(xe.l)({sourceX:a,sourceY:n,sourcePosition:c,targetX:r,targetY:l,targetPosition:i}):Object(xe.h)({sourceX:a,sourceY:n,sourcePosition:c,targetX:r,targetY:l,targetPosition:i});return o.a.createElement(o.a.Fragment,null,u.hasArrow&&o.a.createElement("defs",null,o.a.createElement("marker",{className:"react-flow__arrowhead",id:"marker-".concat(t),markerWidth:"25",markerHeight:"30",viewBox:"-10 -10 20 20",orient:"auto",refX:"0",refY:"0"},o.a.createElement("polyline",{stroke:"rgba(".concat(u.color.r,", ").concat(u.color.g,", ").concat(u.color.b,", ").concat(u.color.a,")"),strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1",fill:"rgba(".concat(u.color.r,", ").concat(u.color.g,", ").concat(u.color.b,", ").concat(u.color.a,")"),points:"-5,-4 0,0 -5,4 -5,-4"})),o.a.createElement("marker",{className:"react-flow__arrowhead",id:"marker-start-".concat(t),markerWidth:"25",markerHeight:"30",viewBox:"-10 -10 20 20",orient:"auto",refX:"0",refY:"0"},o.a.createElement("polyline",{style:{transform:"rotate(180deg)"},stroke:"rgba(".concat(u.color.r,", ").concat(u.color.g,", ").concat(u.color.b,", ").concat(u.color.a,")"),strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1",fill:"rgba(".concat(u.color.r,", ").concat(u.color.g,", ").concat(u.color.b,", ").concat(u.color.a,")"),points:"-5,-4 0,0 -5,4 -5,-4"}))),o.a.createElement("path",{id:t,d:m,stroke:"rgba(".concat(u.color.r,", ").concat(u.color.g,", ").concat(u.color.b,", ").concat(u.color.a,")"),fill:"rgba(".concat(u.color.r,", ").concat(u.color.g,", ").concat(u.color.b,", ").concat(u.color.a,")"),className:"react-flow__edge-path",style:Object(ie.a)(Object(ie.a)({},d),{},{stroke:"rgba(".concat(u.color.r,", ").concat(u.color.g,", ").concat(u.color.b,", ").concat(u.color.a,")")}),markerEnd:"url(#marker-".concat(t,")"),markerStart:"url(#marker-start-".concat(t,")")}))}var Te=Object(xe.j)("arrowclosed","my-marker");console.log(Te);var Ae=new we.a.graphlib.Graph,Ie="https://flowchart-backend.herokuapp.com";Ae.setDefaultEdgeLabel((function(){return{}}));var Ne=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"TB",a="LR"===t;return Ae.setGraph({rankdir:t}),e.forEach((function(e){Object(xe.n)(e)?Ae.setNode(e.id,{width:170,height:180}):Ae.setEdge(e.source,e.target)})),we.a.layout(Ae),console.log(e,"danhjsubkghbjlncsbugk hjbnudcysbkhjnonubskdgh m"),e.map((function(e){if(Object(xe.n)(e)){var t=Ae.node(e.id);e.targetPosition=a?"left":"top",e.sourcePosition=a?"right":"bottom",e.position={x:t.x-85+Math.random()/1e3,y:t.y-90}}return e}))},Re=Object(Oe.a)((function(e){return Object(je.a)({previewChip:{minWidth:160,maxWidth:210}})})),ze=function(e){var t,a=e.data,n="transparent";return o.a.createElement("div",{onMouseOver:function(e){n="black"},onMouseLeave:function(e){n="transparent"}},o.a.createElement("div",{style:{background:"#f0f0f0",borderColor:"rgba(".concat(a.color.r,", ").concat(a.color.g,", ").concat(a.color.b,", ").concat(a.color.a,")"),color:"black",padding:10,border:"2px solid rgba(".concat(a.color.r,", ").concat(a.color.g,", ").concat(a.color.b,", ").concat(a.color.a,")"),width:150,minHeight:10,borderRadius:"10px 10px 0px 0px",textAlign:"center"}},o.a.createElement("div",null),o.a.createElement(u.a,{className:"Typography",variant:"subtitle2",gutterBottom:!0,align:"center",style:{marginTop:"5%"}},a.title)),o.a.createElement(xe.c,{type:"target",id:"1",position:"left",style:{backgroundColor:n,marginRight:"5%",border:"0px",padding:"23%",zIndex:1},isConnectable:!0,connectionMode:"loose"}),o.a.createElement(xe.c,{type:"source",id:"2",position:"top",style:{backgroundColor:n,marginRight:"5%",border:"0px",padding:"23%",zIndex:1},isConnectable:!0,connectionMode:"loose"}),o.a.createElement(xe.c,{type:"target",id:"3",position:"right",style:{backgroundColor:n,marginRight:"5%",border:"0px",padding:"23%",zIndex:1},isConnectable:!0,connectionMode:"loose"}),o.a.createElement(xe.c,{type:"source",id:"4",position:"bottom",style:{backgroundColor:n,marginRight:"5%",border:"0px",padding:"23%",zIndex:1},isConnectable:!0,connectionMode:"loose"}),o.a.createElement("div",{style:(t={width:"93%"},Object(i.a)(t,"width",150),Object(i.a)(t,"background","#f0f0f0"),Object(i.a)(t,"border","2px solid rgba(".concat(a.color.r,", ").concat(a.color.g,", ").concat(a.color.b,", ").concat(a.color.a,")")),Object(i.a)(t,"color","black"),Object(i.a)(t,"padding",10),Object(i.a)(t,"minHeight",40),Object(i.a)(t,"borderRadius","0px 0px 10px 10px"),Object(i.a)(t,"textAlign","center"),t)},o.a.createElement("div",{style:{width:"93%",minHeight:"40px",textAlign:"center",marginLeft:10,marginRight:300}},o.a.createElement(d.a,{container:!0,direction:"row",spacing:1,justifyContent:"center",alignItems:"center"},o.a.createElement("div",{style:{textAlign:"center"}},a.description.map((function(e){return o.a.createElement(u.a,{variant:"subtitle2",gutterBottom:!0,style:{paddingRight:10}},e.key)}))),o.a.createElement(p.a,{orientation:"vertical",style:{minHeight:50,textAlign:"center"},flexItem:!0}),o.a.createElement("div",{style:{textAlign:"center"}},a.description.map((function(e){return o.a.createElement(u.a,{variant:"subtitle2",gutterBottom:!0,style:{paddingLeft:10}},e.value)})))))))},Pe=function(e){var t=e.data,a="transparent";return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{onMouseOver:function(e){a="black"},onMouseLeave:function(e){a="transparent"},style:{background:"#f0f0f0",borderColor:"rgba(".concat(t.color.r,", ").concat(t.color.g,", ").concat(t.color.b,", ").concat(t.color.a,")"),color:"black",padding:10,border:"2px solid rgba(".concat(t.color.r,", ").concat(t.color.g,", ").concat(t.color.b,", ").concat(t.color.a,")"),width:150,minHeight:70,textAlign:"center",borderRadius:"50px"}},o.a.createElement("div",null),o.a.createElement(u.a,{className:"Typography",variant:"subtitle2",gutterBottom:!0,align:"center",style:{marginTop:"15%"}},t.title)),o.a.createElement(xe.c,{type:"target",id:"1",position:"left",style:{backgroundColor:a,marginRight:"5%",border:"0px",padding:"23%",zIndex:1},isConnectable:!0,connectionMode:"loose"}),o.a.createElement(xe.c,{type:"source",id:"2",position:"right",isConnectable:!0,style:{backgroundColor:a,marginRight:"5%",border:"0px",padding:"23%",zIndex:1},connectionMode:"loose"}),o.a.createElement(xe.c,{type:"target",id:"3",position:"top",style:{backgroundColor:a,marginRight:"5%",border:"0px",padding:"23%",zIndex:1},isConnectable:!0,connectionMode:"loose"}),o.a.createElement(xe.c,{type:"source",id:"4",position:"bottom",style:{backgroundColor:a,marginRight:"5%",border:"0px",padding:"23%",zIndex:1},isConnectable:!0,connectionMode:"loose"}))},Fe=function(e){var t=e.data,a="transparent";return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{onMouseOver:function(e){a="black"},onMouseLeave:function(e){a="transparent"},style:{background:"#f0f0f0",borderColor:"rgba(".concat(t.color.r,", ").concat(t.color.g,", ").concat(t.color.b,", ").concat(t.color.a,")"),color:"black",padding:10,border:"2px solid rgba(".concat(t.color.r,", ").concat(t.color.g,", ").concat(t.color.b,", ").concat(t.color.a,")"),width:150,minHeight:70,textAlign:"center",borderRadius:"10px"}},o.a.createElement("div",null),o.a.createElement(u.a,{className:"Typography",variant:"subtitle2",gutterBottom:!0,align:"center",style:{marginTop:"15%"}},t.title)),o.a.createElement(xe.c,{type:"target",id:"1",style:{backgroundColor:a,marginRight:"5%",border:"0px",padding:"23%",zIndex:1},position:"left",isConnectable:!0,connectionMode:"loose"}),o.a.createElement(xe.c,{type:"source",id:"2",style:{backgroundColor:a,marginRight:"5%",border:"0px",padding:"23%",zIndex:1},position:"right",isConnectable:!0,connectionMode:"loose"}),o.a.createElement(xe.c,{type:"target",id:"3",style:{backgroundColor:a,marginRight:"5%",border:"0px",padding:"23%",zIndex:1},position:"top",isConnectable:!0,connectionMode:"loose"}),o.a.createElement(xe.c,{type:"source",id:"4",style:{backgroundColor:a,marginRight:"5%",border:"0px",padding:"23%",zIndex:1},position:"bottom",isConnectable:!0,connectionMode:"loose"}))},Be=function(e){var t=e.data,a=Object(n.useState)(!0),r=Object(c.a)(a,2);r[0],r[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{style:{width:"80px",position:"absolute",height:"80px",marginTop:"10%",marginLeft:"10%",zIndex:"0",backgroundColor:"#f0f0f0",border:"2px solid rgba(".concat(t.color.r,", ").concat(t.color.g,", ").concat(t.color.b,", ").concat(t.color.a,")"),transform:"rotate(-45deg)",borderRadius:"10px"}}," ",o.a.createElement("div",null),o.a.createElement(u.a,{className:"Typography",variant:"subtitle2",gutterBottom:!0,align:"center",style:{marginTop:"30%",transform:"rotate(45deg)"}},t.title)),o.a.createElement("div",{style:{backgroundColor:"transparent",marginTop:"-5%"}},o.a.createElement(xe.c,{type:"source",id:"1",position:"left",style:{backgroundColor:"transparent",marginRight:"5%",border:"0px",padding:"23%",zIndex:1},isConnectable:!0,connectionMode:"loose"}),o.a.createElement(xe.c,{type:"target",id:"2",position:"right",style:{backgroundColor:"transparent",border:"0px",padding:"23%",zIndex:1},isConnectable:!0,connectionMode:"loose"}),o.a.createElement(xe.c,{type:"source",id:"3",position:"top",style:{backgroundColor:"transparent",border:"0px",padding:"23%",zIndex:1},isConnectable:!0,connectionMode:"loose"}),o.a.createElement(xe.c,{type:"target",id:"4",position:"bottom",style:{backgroundColor:"transparent",border:"0px",padding:"23%",zIndex:1},isConnectable:!0,connectionMode:"loose"}),o.a.createElement("div",{style:{backgroundColor:"transparent",color:"black",width:100,minHeight:100,textAlign:"center",borderRadius:"5px"}},o.a.createElement("div",{style:{transform:"rotate(-45deg)",marginTop:"10%",zIndex:0}},o.a.createElement("div",{style:{width:"93%",minHeight:"40px",overflowWrap:"break-word",marginLeft:10,marginRight:300}})))))},Le=function(e){var t=e.currentFile,a=e.selectedColor,r=e.edgeType,l=e.setEditMode,i=e.isEditMode,y=e.orientation;y;var v=Object(n.useState)([]),x=Object(c.a)(v,2),O=x[0],j=x[1],k=Object(n.useState)({}),C=Object(c.a)(k,2),S=C[0],T=C[1],A=Object(n.useState)(!1),N=Object(c.a)(A,2),R=N[0],D=N[1],J=Object(n.useState)(!1),M=Object(c.a)(J,2),Y=(M[0],M[1],Object(n.useState)(!1)),W=Object(c.a)(Y,2),_=W[0],V=W[1],X=Object(n.useState)(!1),U=Object(c.a)(X,2),G=U[0],$=U[1],Q=o.a.useState(!1),Z=Object(c.a)(Q,2),ee=Z[0],te=Z[1],ae=Object(n.useState)(!1),ne=Object(c.a)(ae,2),oe=ne[0],re=ne[1],pe=Object(n.useState)(""),he=Object(c.a)(pe,2),ye=he[0],Oe=he[1],je=Object(n.useState)(!1),Ce=Object(c.a)(je,2),we=Ce[0],Ae=Ce[1],Le=Object(n.useState)(!1),De=Object(c.a)(Le,2),Je=De[0],Me=De[1],He=Object(n.useState)({r:"193",g:"230",b:"255",a:"100"}),Ye=Object(c.a)(He,2),We=Ye[0],_e=Ye[1],Ve=Object(n.useState)({r:"187",g:"187",b:"192",a:"100"}),Xe=Object(c.a)(Ve,2),Ue=Xe[0],Ge=Xe[1],qe=Object(n.useState)([]),Ke=Object(c.a)(qe,2),$e=Ke[0],Qe=(Ke[1],Object(n.useState)({})),Ze=Object(c.a)(Qe,2),et=Ze[0],tt=(Ze[1],Object(n.useState)(!0)),at=Object(c.a)(tt,2),nt=(at[0],at[1]),ot=o.a.useState([]),rt=Object(c.a)(ot,2),lt=rt[0],ct=rt[1],it=Object(n.useState)({value:!1,msg:""}),st=Object(c.a)(it,2),dt=st[0],ut=st[1],mt=Object(n.useState)([]),gt=Object(c.a)(mt,2),pt=gt[0],bt=gt[1],ft=Object(n.useState)(!1),ht=Object(c.a)(ft,2),Et=(ht[0],ht[1]),yt=Object(n.useRef)(null),vt=Object(n.useState)(null),xt=Object(c.a)(vt,2),Ot=xt[0],jt=xt[1],kt=Object(n.useState)(!1),Ct=Object(c.a)(kt,2),wt=Ct[0],St=Ct[1],Tt=Object(n.useState)({key:"",value:""}),At=Object(c.a)(Tt,2),It=At[0],Nt=At[1];console.log();var Rt=Object(n.useState)(!!S.hasOwnProperty("data")&&S.data.hasArrowEdge),zt=Object(c.a)(Rt,2),Pt=zt[0],Ft=zt[1],Bt=Object(n.useState)(!!S.hasOwnProperty("data")&&S.data.hasAnimatedEdge),Lt=Object(c.a)(Bt,2),Dt=Lt[0],Jt=Lt[1],Mt=Object(n.useState)(!!S.hasOwnProperty("data")&&S.data.isCollapsable),Ht=Object(c.a)(Mt,2),Yt=Ht[0],Wt=Ht[1],_t=function(){St(!1)},Vt=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];console.log(t),fetch("".concat(Ie,"/api/update-elements"),{method:"POST",body:JSON.stringify({session_id:localStorage.getItem("session"),file:t.id,isDelete:a,elements:e}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){console.log(e.elements),j(e.elements)}))},Xt=function(){var e=Object(ce.a)(le.a.mark((function e(t){var a,n;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=Object(ie.a)({},t)).type="customEdge",a.data={hasArrow:!1,type:r,color:Ue},a.animated=!1,console.log(a,"**********8"),e.next=7,Object(xe.f)(a,O);case 7:return n=e.sent,e.next=10,j(n);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ut=function(){var e=Object(ce.a)(le.a.mark((function e(t,a){return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i?(T(a),Wt(a.data.isCollapsable),Jt(a.data.hasAnimatedEdge),Ft(a.data.hasArrowEdge)):T(a);case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Gt=function e(t,a){return Object(xe.k)(t,a).reduce((function(t,n){return[].concat(Object(s.a)(t),[n],Object(s.a)(e(n,a)))}),[])},qt=function(){var e=Object(ce.a)(le.a.mark((function e(t,a){var n,o,r;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:!1===i&&a.data.isCollapsable&&(n=Object(s.a)(O),(o=Object(xe.k)(a,O)).length>0&&(r=Gt(a,O),console.log(r),console.log(o),o[0].isHidden?o.map((function(e){var t=Object(ie.a)({},e);t.isHidden=!1,console.log(t),n=n.map((function(a){return a.id!==e.id?(a.hasOwnProperty("target")&&a.target===e.id&&(a.isHidden=!1),a):t}))})):r.map((function(e){var t=Object(ie.a)({},e);t.isHidden=!0,console.log(t),n=n.map((function(a){return a.id!==e.id?(a.hasOwnProperty("target")&&a.target===e.id&&(a.isHidden=!0),a):t}))})),console.log(n),j(n)));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){fetch("".concat(Ie,"/api/get-user-info"),{method:"POST",body:JSON.stringify({session_id:localStorage.getItem("session")}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){console.log("testtttttttttt",e);var a=[],n=JSON.parse(e.elements);a=0===n.length?[]:n.hasOwnProperty(t.id)?n[t.id]:[],console.log(a),j(a),bt(JSON.parse(e.tags))}))}),[t]);var Kt,$t=function(){re(!1)},Qt=function(){var e=Object(ce.a)(le.a.mark((function e(){var t;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=Object(s.a)(O)).map((function(e){if(e.id===S.id&&!S.data.tags.includes(ye)){var t=Object(s.a)(S.data.tags);t.push(ye),S.data.tags=t}})),e.next=4,j(t);case 4:ta(t),$(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Zt=function(){var e=Object(ce.a)(le.a.mark((function e(){var a,n;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Object(xe.i)([S],O),n=O.filter((function(e){return!a.includes(e)&&e.id!==S.id})),null!==t&&(Object(ie.a)({},t).elements=n),j(n),Vt(n,t),T({});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ea=function(){return"randomnode_".concat(+new Date+Math.random())},ta=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,a=Object(s.a)(e),n=Object(ie.a)({},t);n.elements=a,j(a),Vt(a,t)},aa=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:100,y:0},o=O?Object(s.a)(O):[];o.push({id:ea(),node:t.id,type:e,data:{title:"title",description:"special"===e?[{key:"",value:""}]:null,color:a,isCollapsable:!0,hasAnimatedEdge:!1,hasArrowEdge:!1,tags:[],desc:"description"},targetPosition:"horizontal"===y?"left":"top",sourcePosition:"horizontal"===y?"right":"bottom",isHidden:!1,position:n});var r=Object(ie.a)({},t);r.elements=o,j(o)},na=function(){var e=Object(ce.a)(le.a.mark((function e(){var t,a,n;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(xe.i)([S],O);case 2:t=e.sent,a=Object(s.a)(O),t.map((function(e){a.map((function(t,a){Object(xe.m)(t)?t.id===e.id&&(console.log(t),t.data.hasArrow=!0===Pt?null:Te):t.id===S.id&&(n=a)}))})),a[n].data.hasArrowEdge=!a[n].data.hasArrowEdge,Ft(!Pt),console.log(a[n].data.hasArrowEdge),j(a);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),oa=q()({default:{color:{width:"36px",height:"14px",borderRadius:"2px",background:"rgba(".concat(We.r,", ").concat(We.g,", ").concat(We.b,", ").concat(We.a,")")},swatch:{padding:"5px",borderRadius:"1px",boxShadow:"0 0 0 1px rgba(0,0,0,.1)",display:"inline-block",cursor:"pointer"},popover:{position:"absolute",zIndex:"2"},cover:{position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}}}),ra=q()({default:{color:{width:"36px",height:"14px",borderRadius:"2px",background:"rgba(".concat(Ue.r,", ").concat(Ue.g,", ").concat(Ue.b,", ").concat(Ue.a,")")},swatch:{padding:"5px",borderRadius:"1px",boxShadow:"0 0 0 1px rgba(0,0,0,.1)",display:"inline-block",cursor:"pointer"},popover:{position:"absolute",zIndex:"2"},cover:{position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}}}),la=function(e){var t;return console.log(e),/^#([A-Fa-f0-9]{3}){1,2}$/.test(e)?(console.log("yayyyyyyyyyyyyy"),3==(t=e.substring(1).split("")).length&&(t=[t[0],t[0],t[1],t[1],t[2],t[2]]),{r:(t="0x"+t.join(""))>>16&255,g:t>>8&255,b:255&t,a:1}):{r:"193",g:"230",b:"255",a:"100"}};console.log("elements",O),0===O.length?Kt=[]:(console.log(O,"***********************88"),(Kt=O.filter((function(e){return e.node===t.id||e.source}))).sort((function(e,t){if(e.hasOwnProperty("data")&&t.hasOwnProperty("data"))return parseInt(e.id.slice(11,24))-parseInt(t.id.slice(11,24))}))),i||(Kt=Ne(Kt,"vertical"===y?"TB":"LR")),console.log(Kt),console.log(O);var ca=Re();return null===t?o.a.createElement("div",null):o.a.createElement(o.a.Fragment,null,o.a.createElement(d.a,{container:!0,direction:"row",spacing:1,style:{width:"80%"}},o.a.createElement(d.a,{item:!0,xs:2,style:{textAlign:"start"}},i&&o.a.createElement(o.a.Fragment,null,o.a.createElement(g.a,{variant:"outlined",color:"primary",startIcon:o.a.createElement(I.a,null),style:{textAlign:"start",marginTop:20},onClick:function(){return re(!0)}},"New Node"),o.a.createElement(P.a,{open:oe,onClose:$t,"aria-labelledby":"form-dialog-title"},o.a.createElement(L.a,{id:"form-dialog-title",style:{textAlign:"center"}},"Select a Shape"),o.a.createElement(B.a,null,o.a.createElement(d.a,{container:!0,direction:"column",spacing:1},o.a.createElement(d.a,{container:!0,direction:"row",spacing:1},o.a.createElement(d.a,{item:!0,xs:6},o.a.createElement("div",{onClick:function(){aa("special"),re(!1)}},o.a.createElement("div",{style:{background:"#ADD8E6",color:"black",padding:10,border:"1px solid black",width:100,height:10,borderRadius:"10px 10px 0px 0px",textAlign:"center",cursor:"pointer"}}),o.a.createElement("div",{style:{background:"white",border:"1px solid black",color:"black",padding:10,width:100,height:40,borderRadius:"0px 0px 10px 10px",textAlign:"center",marginRight:"20px",cursor:"pointer"}}))),o.a.createElement(d.a,{item:!0,xs:6},o.a.createElement("div",{style:{border:"1px solid black",height:"90px",width:"130px",borderRadius:"50px",marginLeft:"10px",cursor:"pointer"},onClick:function(){aa("oval"),re(!1)}}))),o.a.createElement(d.a,{container:!0,direction:"row",spacing:1,style:{paddingTop:"30px",paddingBottom:"20px"}},o.a.createElement(d.a,{item:!0,xs:6},o.a.createElement("div",{style:{border:"1px solid black",height:"80px",width:"130px",borderRadius:"10px",cursor:"pointer"},onClick:function(){aa("rectangle"),re(!1)}})),o.a.createElement(d.a,{item:!0,xs:6},o.a.createElement("div",{style:{border:"1px solid black",height:"80px",width:"80px",borderRadius:"5px",transform:"rotate(45deg)",marginLeft:"30px",cursor:"pointer"},onClick:function(){aa("diamond"),re(!1)}})))))))),o.a.createElement(d.a,{item:!0,xs:4},o.a.createElement(u.a,{variant:"h6",style:{fontWeight:"bold"}},"Project: ".concat(t.parentId)),o.a.createElement(u.a,{variant:"h6"},"Sub Process: ".concat(t.text))),o.a.createElement(d.a,{item:!0,xs:6,style:{textAlign:"center"}},o.a.createElement(u.a,{component:"div"},o.a.createElement(d.a,{component:"label",container:!0,alignItems:"center",spacing:1,style:{paddingTop:20,paddingLeft:90}},o.a.createElement(d.a,{item:!0},"View"),o.a.createElement(d.a,{item:!0},o.a.createElement(se.a,{color:"primary",checked:i,onChange:function(){nt(!0),l(!i)},name:"checked"})),o.a.createElement(d.a,{item:!0},"Edit"),i&&o.a.createElement(g.a,{variant:"contained",color:"primary",style:{marginLeft:60},onClick:function(){ta(Object(s.a)(O))}},"Save"),o.a.createElement(g.a,{variant:"contained",color:"primary",style:{marginLeft:i?10:30},startIcon:o.a.createElement(be.a,null),onClick:function(){te(!0)}},"Import CSV"),o.a.createElement(fe.a,{clearOnUnmount:!0,filesLimit:1,dialogTitle:o.a.createElement(o.a.Fragment,null,console.log(dt),dt.value&&o.a.createElement(ke.a,{severity:"error"},dt.msg),o.a.createElement("span",null,"Upload file"),o.a.createElement(m.a,{style:{right:"12px",top:"8px",position:"absolute"},onClick:function(){return te(!1)}},o.a.createElement(Ee.a,null))),acceptedFiles:[".csv"],fileObjects:lt,cancelButtonText:"cancel",showAlerts:["error","info"],submitButtonText:"submit",maxFileSize:5e6,open:ee,onAdd:function(e){console.log("onAdd",e),0===lt.length&&ct([].concat(lt,e))},onDelete:function(e){var t=Object(s.a)(lt).filter((function(t){return t!==e}));ct(t),console.log("onDelete",e)},onClose:function(){return te(!1)},onSave:function(){console.log(lt[0]),ve.a.parse(lt[0].file,{complete:function(e){var a=e.data,n=[],o={},r={},l=[],c={},i=[],d={},u=0;if((a=a.slice(1)).map((function(e){console.log("0------0",e);var a=function(e){if(console.log(pt),0===e.length)return[];var t=e.split(",");return 0===pt.length?{value:!0,msg:"One or more of the tags provided does not exist."}:(t.map((function(e){if(!pt.includes(e))return{value:!0,msg:"One or more of the tags provided does not exist."}})),t)}(e[3]);if(console.log(a,"7777777777777777777"),console.log(e[4]),console.log(e[0]),console.log(e[0].includes(".")),e[0].includes(".")){u+=1;var m=void 0!==d[o[e[0].split(".")[0]]]?Object(s.a)(d[o[e[0].split(".")[0]]]):[];m.push({key:e[1],value:e[2]}),d[o[e[0].split(".")[0]]]=Object(s.a)(m)}else if(["special","oval","rectangle","diamond"].includes(e[4].toLowerCase()))if(console.log("----"),Array.isArray(a)){if(o[e[0]]=ea(),n.push({id:o[e[0]],node:t.id,type:e[4],data:{title:e[1],description:null,color:e[2].startsWith("#")?la(e[2]):{r:"193",g:"230",b:"255",a:"100"},tags:a,isCollapsable:"TRUE"===e[5]},isHidden:!1,position:{x:0,y:0},desc:null}),"TRUE"===e[7]&&l.push(o[e[0]]),"step"===e[8]?c[o[e[0]]]="step":c[o[e[0]]]="curved","TRUE"===e[9]&&i.push(o[e[0]]),console.log(n),e[6].length>0&&e[6].includes(",")){var g=e[6].split(",");r[e[0]]=g}}else console.log(a),ut({value:!0,msg:"One or more of the tags provided does not exist."});else console.log("test"),ut({value:!0,msg:"A type of shape in the file does not exist."})})),console.log(n),console.log(d),n.map((function(e){e.data.description=d[e.id]})),console.log("Finished:",e.data),console.log("onSave",lt),console.log(n.length),n.length===a.length-u){for(var m in console.log(o),console.log(r),r)if(r.hasOwnProperty(m))if(Array.isArray(r[m]))r[m].map((function(e){var t=Object(xe.f)({animated:!!l.includes(o[m]),type:"customEdge",data:{type:c[o[m]],hasArrow:!0===i.includes(o[m]),color:Ue},source:o[m],target:o[e]},n);console.log(t),n=t}));else{var g=Object(xe.f)({animated:!!l.includes(o[m]),type:"customEdge",data:{type:c[o[m]],hasArrow:!0===i.includes(o[m]),color:Ue},source:o[m],target:o[r[m]]},n);console.log(g),n=g}var p=Ne(n);j(p),ta(p),console.log(n),Et(!0),te(!1)}}})},showPreviewsInDropzone:!1,useChipsForPreview:!0,previewGridProps:{container:{spacing:1,direction:"row"}},previewChipProps:{classes:{root:ca.previewChip}},showFileNamesInPreview:!0}),o.a.createElement(de.a,{open:dt.value,autoHideDuration:5e3,onClose:function(){return ut({value:!1,msg:""})}},o.a.createElement(ke.a,{onClose:function(){return ut({value:!1,msg:""})},severity:"error"},dt.msg)))))),o.a.createElement(p.a,{orientation:"horizontal"}),o.a.createElement(xe.e,null,o.a.createElement("div",{className:"reactflow-wrapper",ref:yt},o.a.createElement(xe.g,{nodeTypes:{special:ze,oval:Pe,rectangle:Fe,diamond:Be},edgeTypes:{customEdge:Se},elements:0!==Object.keys(et).length?$e:Kt,onElementsRemove:function(){var e=O.filter((function(e){return e.id!==S.id}));Object(ie.a)({},t).elements=e,j(e),ta(e)},onNodeDoubleClick:Ut,onElementClick:qt,onDrop:function(e){e.preventDefault();var t=yt.current.getBoundingClientRect(),a=e.dataTransfer.getData("application/reactflow"),n=Ot.project({x:e.clientX-t.left,y:e.clientY-t.top});aa(a,n)},onDragOver:function(e){e.preventDefault(),e.dataTransfer.dropEffect="move"},onNodeDragStop:function(e,t){var a=Object(s.a)(O);console.log(t),a.map((function(e){console.log(e),e.id===t.id&&(console.log(e),e.position=Object(ie.a)({},t.position))})),console.log(a),j(a)},connectionLineType:r,onPaneContextMenu:function(){return re(!0)},onConnect:Xt,onLoad:function(e){jt(e),e.fitView()},snapToGrid:!1,paneMoveable:!0,style:{height:"90vh",width:i?"84%":"95%"}},o.a.createElement(xe.d,{nodeStrokeColor:function(e){var t;return(null===(t=e.style)||void 0===t?void 0:t.background)?e.style.background:"special"===e.type?"#0041d0":"oval"===e.type?"#008000":"rectangle"===e.type?"#8A2BE2":"diamond"===e.type?"#00008b":"output"===e.type?"#ff0072":"default"===e.type?"#1a192b":"#eee"},nodeColor:function(e){var t;return(null===(t=e.style)||void 0===t?void 0:t.background)?e.style.background:"#fff"},nodeBorderRadius:2}),o.a.createElement(xe.b,null),o.a.createElement(xe.a,{color:"#aaa",gap:16})))),o.a.createElement("svg",{width:"0",height:"0"},o.a.createElement("defs",null,o.a.createElement("marker",{className:"react-flow__arrowhead",id:"my-marker",markerWidth:"25",markerHeight:"25",viewBox:"-10 -10 20 20",orient:"auto",refX:"0",refY:"0"},o.a.createElement("polyline",{stroke:"#BBBBC0",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1",fill:"#BBBBC0",points:"-5,-4 0,0 -5,4 -5,-4"})))),i?o.a.createElement(ue.a,{variant:"permanent",anchor:"right",style:{textAlign:"center"}},o.a.createElement(d.a,{item:!0,xs:12,style:{textAlign:"center",width:250,overflow:"hidden"}},0===Object.keys(S).length?o.a.createElement(u.a,{variant:"h6",gutterBottom:!0,style:{paddingTop:380,paddingLeft:10,paddingRight:10}},"Double-click on any item to get a detailed view."):o.a.createElement("div",null,o.a.createElement(u.a,{variant:"h6",style:{marginTop:40}},"Edit Title"),o.a.createElement(z.a,{name:S.id,defaultValue:S.data.title,margin:"normal",onChange:function(e){var t=Object(s.a)(O);t.map((function(t){var a;t.id===e.target.name&&(a=e.target.value.length>=27?e.target.value.substring(0,27):e.target.value,t.data.title=a,T(t))})),j(t),ta(t)},disabled:!R,style:{width:"90%"},value:S.data.title,InputProps:{endAdornment:o.a.createElement(me.a,{position:"end"},o.a.createElement(m.a,{onClick:function(){D(!0)}},o.a.createElement(H.a,null)))}}),o.a.createElement(u.a,{variant:"h6",style:{marginTop:40}},"Edit Description"),o.a.createElement(z.a,{name:S.id,defaultValue:S.data.desc,margin:"normal",rows:5,multiline:!0,onChange:function(e){var t=Object(s.a)(O);t.map((function(t){t.id===e.target.name&&(t.data.desc=e.target.value,T(t))})),console.log("new ele",t),j(t),ta(t)},disabled:!_,style:{width:"90%"},value:S.data.desc,InputProps:{endAdornment:o.a.createElement(me.a,{position:"end"},o.a.createElement(m.a,{onClick:function(){V(!0)}},o.a.createElement(H.a,null)))}}),"special"===S.type&&o.a.createElement(o.a.Fragment,null,o.a.createElement(u.a,{variant:"h6",style:{marginTop:20}},"Add Field"),o.a.createElement(g.a,{variant:"outlined",startIcon:o.a.createElement(I.a,null),color:"secondary",onClick:function(){return St(!0)}},"Add"),o.a.createElement(P.a,{open:wt,onClose:_t,"aria-labelledby":"form-dialog-title"},o.a.createElement(L.a,{id:"form-dialog-title"},"Add New Field"),o.a.createElement(B.a,null,o.a.createElement("div",{style:{textAlign:"center"}},o.a.createElement(z.a,{style:{width:"40%",marginRigh:10},label:"Key",id:"outlined-size-small",defaultValue:"Key",variant:"outlined",size:"small",onChange:function(e){var t=Object(ie.a)({},It);t.key=e.target.value,Nt(t)}}),o.a.createElement(z.a,{style:{width:"40%",marginLeft:10},label:"Value",id:"outlined-size-normal",defaultValue:"Value",onChange:function(e){var t=Object(ie.a)({},It);t.value=e.target.value,Nt(t)},variant:"outlined",size:"small"}))),o.a.createElement(F.a,null,o.a.createElement(g.a,{onClick:_t,color:"primary"},"Cancel"),o.a.createElement(g.a,{onClick:function(){var e=Object(s.a)(O);e.map((function(e){e.id===S.id&&e.data.description.push(It)})),j(e),ta(e),St(!1)},color:"primary"},"Add")))),o.a.createElement(p.a,{style:{marginTop:10}}),o.a.createElement(g.a,{variant:"outlined",color:"primary",startIcon:o.a.createElement(I.a,{size:"medium"}),onClick:function(){return $(!0)},style:{marginTop:20}},"Add Tag"),o.a.createElement(P.a,{open:G,onClose:$t,"aria-labelledby":"form-dialog-title"},o.a.createElement(L.a,{id:"form-dialog-title"},"Add Tag"),o.a.createElement(B.a,null,o.a.createElement(h.a,{labelId:"demo-simple-select-placeholder-label-label",id:"demo-simple-select-placeholder-label",value:ye,onChange:function(e){Oe(e.target.value)},fullWidth:!0,displayEmpty:!0},o.a.createElement(E.a,{value:""},o.a.createElement("em",null,"None")),null!==localStorage.getItem("tags")&&JSON.parse(localStorage.getItem("tags")).length>0?JSON.parse(localStorage.getItem("tags")).map((function(e){return o.a.createElement(E.a,{value:e},e)})):o.a.createElement("div",null))),o.a.createElement(F.a,null,o.a.createElement(g.a,{onClick:$t,color:"primary"},"Cancel"),o.a.createElement(g.a,{onClick:Qt,color:"primary"},"Add"))),o.a.createElement(p.a,{style:{marginTop:20,marginBottom:10}}),S.data.tags.length>0&&S.data.tags.map((function(e){return o.a.createElement(ge.a,{label:e,color:"secondary",style:{marginBottom:10}})})),o.a.createElement(p.a,{orientation:"horizontal",style:{marginTop:10}}),o.a.createElement(u.a,{component:"div"},o.a.createElement(d.a,{component:"label",container:!0,alignItems:"center",spacing:1,style:{paddingTop:20,paddingLeft:40}},o.a.createElement(d.a,{item:!0},o.a.createElement(se.a,{color:"primary",checked:Yt,onClick:function(){return function(){console.log("YYYYYYYYYYYYYGUKB");var e=Object(s.a)(O);e.map((function(e){e.id===S.id&&(console.log(!e.data.isCollapsable),e.data.isCollapsable=!Yt)})),Wt(!Yt),ta(e)}()},name:"checked2"})),o.a.createElement(d.a,{item:!0},"Collapsable"))),o.a.createElement(p.a,{orientation:"horizontal",style:{marginTop:10}}),o.a.createElement(d.a,{item:!0,xs:12,style:{textAlign:"center",maxHeight:"100%",overflow:"auto"}},o.a.createElement("div",{style:{paddingLeft:20,paddingTop:20}},o.a.createElement(d.a,{item:!0,xs:12},o.a.createElement(u.a,{variant:"subtitle1",gutterBottom:!0},"Node Color"),o.a.createElement("div",{style:oa.swatch,onClick:function(){Ae(!we)}},o.a.createElement("div",{style:oa.color})),we?o.a.createElement("div",{style:oa.popover},o.a.createElement("div",{style:oa.cover,onClick:function(){Ae(!1)}}),o.a.createElement(K.a,{color:We,onChange:function(e){_e(e.rgb);var t=Object(s.a)(O);t.map((function(t){t.id===S.id&&(t.data.color=e.rgb)})),j(t)}})):null))),o.a.createElement(p.a,{style:{marginTop:20,marginBottom:10}}),o.a.createElement(d.a,{item:!0,xs:12,style:{textAlign:"start",maxHeight:"100%",overflow:"auto"}},o.a.createElement(b.a,{variant:"outlined",style:{width:150,marginTop:30,marginLeft:20}},o.a.createElement(f.a,{id:"demo-simple-select-outlined-label"},"EdgeType"),o.a.createElement(h.a,{style:{fontSize:15},labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",onChange:function(e){var t=Object(xe.i)([S],O),a=Object(s.a)(O);t.map((function(t){a.map((function(a){Object(xe.m)(a)&&a.id===t.id&&(console.log(a),a.data.type=e.target.value)}))})),j(a),ta(a)},variant:"outlined",label:"EdgeType",defaultValue:"smoothstep",displayEmpty:!0},o.a.createElement(E.a,{value:"smoothstep"},"Step Edge"),o.a.createElement(E.a,{value:"default"},"Curved Edge")))),o.a.createElement(u.a,{component:"div"},o.a.createElement(d.a,{component:"label",container:!0,alignItems:"center",spacing:1,style:{paddingTop:20,paddingLeft:40}},o.a.createElement(d.a,{item:!0},o.a.createElement(se.a,{color:"primary",checked:Dt,onClick:function(){return function(){var e,t=Object(xe.i)([S],O),a=Object(s.a)(O);t.map((function(t){a.map((function(a,n){Object(xe.m)(a)?a.id===t.id&&(console.log(a),a.animated=!Dt):a.id===S.id&&(e=n)}))})),a[e].data.hasAnimatedEdge=!a[e].data.hasAnimatedEdge,Jt(!Dt),j(a),ta(a)}()},name:"checked3"})),o.a.createElement(d.a,{item:!0},"Animated"))),o.a.createElement(u.a,{component:"div"},o.a.createElement(d.a,{component:"label",container:!0,alignItems:"center",spacing:1,style:{paddingTop:20,paddingLeft:40}},o.a.createElement(d.a,{item:!0},o.a.createElement(se.a,{color:"primary",checked:Pt,onClick:function(){return na()},name:"checked4"})),o.a.createElement(d.a,{item:!0},"Arrow"))),o.a.createElement("div",{style:{paddingLeft:20,paddingTop:20}},o.a.createElement(d.a,{item:!0,xs:12},o.a.createElement(u.a,{variant:"subtitle1",gutterBottom:!0},"Arrow Color"),o.a.createElement("div",{style:ra.swatch,onClick:function(){Me(!Je)}},o.a.createElement("div",{style:ra.color})),Je?o.a.createElement("div",{style:ra.popover},o.a.createElement("div",{style:ra.cover,onClick:function(){Me(!1)}}),o.a.createElement(K.a,{color:Ue,onChange:function(e){Ge(e.rgb);var t=Object(xe.i)([S],O),a=Object(s.a)(O);t.map((function(t){a.map((function(a,n){Object(xe.m)(a)&&a.id===t.id&&(console.log(a),a.data.color=e.rgb)}))})),j(a)}})):null)),o.a.createElement(p.a,{style:{marginTop:20,marginBottom:10}}),o.a.createElement(m.a,{style:{color:"red"},onClick:function(){return Zt()}},o.a.createElement(w.a,null))))):o.a.createElement("div",null,Object.keys(S).length>0&&o.a.createElement(ue.a,{variant:"permanent",anchor:"right",style:{textAlign:"center"}},o.a.createElement(d.a,{item:!0,xs:12,style:{textAlign:"center",width:250,overflow:"hidden"}},o.a.createElement("div",null,o.a.createElement(u.a,{variant:"h6",style:{marginTop:40}},"Title"),o.a.createElement(u.a,{variant:"h6",gutterBottom:!0},S.data.title),o.a.createElement(u.a,{variant:"h6",style:{marginTop:40,fontWeight:"bolder"}},"Description"),o.a.createElement(u.a,{variant:"h6",gutterBottom:!0},S.data.desc))))))},De=a(474),Je=a.n(De),Me=a(475);var He=function(){var e=Object(n.useState)(null===localStorage.getItem("current")?{}:JSON.parse(localStorage.getItem("current"))),t=Object(c.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)(!1),i=Object(c.a)(l,2),s=i[0],u=i[1],m=Object(n.useState)({r:"193",g:"230",b:"255",a:"100"}),g=Object(c.a)(m,2),p=g[0],b=g[1],f=Object(n.useState)("smoothstep"),h=Object(c.a)(f,2),E=h[0],y=h[1],v=Object(n.useState)(!1),x=Object(c.a)(v,2),O=x[0],j=x[1],k=Object(n.useState)("vertical"),C=Object(c.a)(k,2),w=C[0],S=C[1];return Object(n.useEffect)((function(){if(null===localStorage.getItem("session")){var e=Je.a.sign({userId:Object(Me.v4)()},"secretkey",{expiresIn:"1h",algorithm:"HS256"});!function(e){fetch("".concat("https://flowchart-backend.herokuapp.com","/api/update-session"),{method:"POST",body:JSON.stringify({session_id:e}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return console.log(e)}))}(e),localStorage.setItem("session",e)}}),[]),o.a.createElement(d.a,{container:!0,spacing:1},o.a.createElement(d.a,{item:!0,xs:5,sm:4,md:2,lg:2},o.a.createElement(oe,{currentFile:a,setCurrentFile:r,setCanvasVisibility:function(e){return u(e)},setEdgeType:y,setSelectedColor:b,isEditMode:O,setOrientation:S,orientation:w})),s&&o.a.createElement(d.a,{item:!0,xs:7,sm:8,md:10,lg:10},o.a.createElement(Le,{orientation:w,currentFile:a,setCurrentFile:r,isEditMode:O,setEditMode:j,selectedColor:p,edgeType:E})))};l.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(He,null)),document.getElementById("root"))}},[[496,1,2]]]);
//# sourceMappingURL=main.12f1b53a.chunk.js.map